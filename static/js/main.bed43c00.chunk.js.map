{"version":3,"sources":["components/UI/FormProfile/formProfile.module.css","components/OrdersList/ordersList.module.css","components/App/app.module.css","pages/MainPage/mainPage.module.css","components/BurgerConstructor/burgerConstructor.module.css","components/TotalFeedOrders/totalFeedOrders.module.css","components/Icon/icon.module.css","pages/Profile/profile.module.css","pages/NotFoundPage/notFoundPage.module.css","pages/IngredientPage/ingredientPage.module.css","components/IngredientDetails/ingredientDetails.module.css","components/OrdersItem/ordersItem.module.css","store/data/data.actions.ts","types/index.ts","components/AppHeader/AppHeader.tsx","utils/cookie.ts","utils/constants.ts","store/numberOrders/numberOrders.actions.ts","store/user/user.actions.ts","store/details/details.actions.ts","utils/Api.ts","components/Protected-route/protected-route.tsx","hooks/useModal.ts","components/IngredientsItem/IngredientsItem.tsx","components/IngredientsList/IngredientsList.tsx","components/ModalOverlay/ModalOverlay.tsx","components/Modal/Modal.tsx","components/IngredientDetails/IngredientDetails.tsx","store/constructor/constructor.actions.ts","components/BurgerIngredients/BurgerIngredients.tsx","store/socket/socket.actions.ts","components/ConstructorItem/ConstructorItem.tsx","components/ConstructorList/ConstructorList.tsx","images/graphics.svg","components/Icon/Icon.tsx","components/OrderNumberDetails/OrderNumberDetails.tsx","components/TotalConstructor/TotalConstructor.tsx","components/BurgerConstructor/BurgerConstructor.tsx","pages/MainPage/MainPage.tsx","components/UI/Form/Form.tsx","components/UI/FormLink/FormLink.tsx","pages/LoginPage/LoginPage.tsx","pages/RegisterPage/RegisterPage.tsx","pages/ForgotPasswordPage/ForgotPasswordPage.tsx","pages/ResetPassword/ResetPassword.tsx","components/UI/FormProfile/FormProfile.tsx","components/ProfileNav/ProfileNav.tsx","pages/Profile/Profile.tsx","components/TotalFeedOrders/TotalFeedOrders.tsx","utils/index.ts","components/OrdersItem/OrdersItem.tsx","components/OrdersList/OrdersList.tsx","store/ordersDetails/ordersDetails.actions.ts","store/middleware/socketMiddleware.ts","components/OrderInfo/OrderInfo.tsx","components/OrderDetails/OrderDetails.tsx","pages/OrdersFeedPage/OrdersFeedPage.tsx","pages/NotFoundPage/NotFoundPage.tsx","pages/IngredientPage/IngredientPage.tsx","pages/OrderDetailsPage/OrderDetailsPage.tsx","pages/OrdersHistoryPage/OrdersHistoryPage.tsx","components/App/App.tsx","store/constructor/constructor.reducers.ts","store/data/data.reducers.ts","store/details/details.reducers.ts","store/user/user.reducers.ts","store/numberOrders/numberOrders.reducers.ts","store/socket/socket.reducers.ts","store/ordersDetails/orderDetails.reducers.ts","types/reducers.ts","store/store.ts","index.tsx","components/OrderDetails/orderDetails.module.css","components/IngredientsList/ingredientsList.module.css","components/Modal/modal.module.css","components/OrderInfo/orderInfo.module.css","components/AppHeader/appHeader.module.css","components/ConstructorList/constructorList.module.css","components/OrderNumberDetails/orderNumberDetails.module.css","components/ProfileNav/profileNav.module.css","components/IngredientsItem/ingredientsItem.module.css","components/TotalConstructor/totalConstructor.module.css","pages/OrdersHistoryPage/ordersHistoryPage.module.css","components/BurgerIngredients/burgerIngredients.module.css","components/UI/Form/form.module.css","pages/OrdersFeedPage/ordersFeedPage.module.css","pages/OrderDetailsPage/orderDetailsPage.module.css","components/ModalOverlay/modalOverlay.module.css","components/ConstructorItem/constructorItem.module.css","components/UI/FormLink/formLink.module.css"],"names":["module","exports","RootDataAction","useSelector","selectorHook","useDispatch","dispatchHook","AppHeader","user","state","userReducer","isAuth","isUser","className","styles","main","main__wrapper","wrapper","nav","to","clsx","item","type","text","name","setCookie","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","document","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","deleteCookie","API_URL","url","split","join","RootNumberOrdersActions","dataActionCreator","GET_DATA_REQUEST","payload","GET_DATA_SUCCESS","GET_DATA_FAILED","RootUserActions","numberOrdersActionCreator","GET_NUMBER_ORDERS_REQUEST","GET_NUMBER_ORDERS_SUCCESS","GET_NUMBER_ORDERS_FAILED","RootDetailsAction","userActionCreator","GET_LOGIN_SUCCESS","LOG_OUT","USER_UPDATE_SUCCESS","SET_EDIT","registrationRequest","GET_REGISTRATION_REQUEST","registrationSuccess","GET_REGISTRATION_SUCCESS","registrationFailed","GET_REGISTRATION_FAILED","loginRequest","GET_LOGIN_REQUEST","loginSuccess","loginFailed","GET_LOGIN_FAILED","userRequest","GET_USER_REQUEST","userSuccess","GET_USER_SUCCESS","userFailed","GET_USER_FAILED","userUpdateRequest","USER_UPDATE_REQUEST","userUpdateSuccess","userUpdateFailed","USER_UPDATE_FAILED","checkResponse","res","ok","json","Promise","reject","status","updateToken","token","fetch","method","headers","body","JSON","stringify","then","getUserRequest","Accept","Authorization","getUserUpdateRequest","data","getUser","dispatch","success","console","log","refreshToken","accessToken","ProtectedRoute","onlyUnAuth","children","rest","location","useLocation","isToken","useState","isUserLoaded","setUserLoaded","useEffect","pathname","from","render","useModal","isOpen","setIsOpen","openPopup","closePopup","closePopupEsc","IngredientsItem","onClick","image","price","_id","useDrag","ref","count","constructorData","bun","ingredients","filter","length","onKeyDown","img","src","alt","main__price","size","IngredientsList","scrollHandler","ingredientsData","buns","sauce","onScroll","subtitle","id","ulList","map","link","background","ModalOverlay","overlayRef","useRef","hidden","event","current","contains","target","ModalIngredients","header","title","icon","ModalOrderInfo","main__orders","Modal","isOrders","reactModals","getElementById","e","key","addEventListener","removeEventListener","ReactDOM","createPortal","IngredientDetails","details","ingredientsDetails","calories","proteins","fat","carbohydrates","energyValue","block","RootConstructorAction","detailsActionCreator","GET_DETAILS","DELETE_DETAILS","BurgerIngredients","setCurrent","getDetails","deleteDetails","history","useHistory","onClickTab","tab","element","scrollIntoView","behavior","active","scroll","scrollTop","push","RootSocketAction","constructorActionCreator","ADD_BUNS","ADD_INGREDIENTS","MOVE_INGREDIENT","DELETE_INGREDIENT","ClEAR_INGREDIENT","ConstructorItem","index","deleteHandler","isLocked","moveIngredients","collect","monitor","opacity","isDragging","dragRef","useDrop","accept","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","dropRef","style","thumbnail","handleClose","ConstructorList","addBuns","addIngredients","deleteItems","move","drop","uuidv4","onDropHandler","newCards","dragCard","splice","item__top","item__bottom","Icon","OrderNumberDetails","numberOrder","ordersNumberRequest","ordersNumberFailed","ordersNumber","clear","order","number","readiness","TotalConstructor","totalPrice","setTotalPrice","allItems","arrIdIngredients","arr","priceBuns","Number","sum","reduce","acc","calculateTotalPrice","button","numberOrdersSuccess","numberOrdersError","catch","err","disabled","BurgerConstructor","MainPage","DndProvider","backend","HTML5Backend","Form","textButton","onSubmit","htmlType","FormLink","textLink","LoginPage","email","password","setEdit","onChange","preventDefault","login","placeholder","RegisterPage","setTimeout","ForgotPasswordPage","setValue","ResetPassword","isForgotPassword","resetPassword","FormProfile","form","ProfileNav","out","exact","activeClassName","link_active","Profile","TotalFeedOrders","socket","messages","total","totalToday","doneOrders","pendingOrders","list","text__green","all","subtitle__all","text__large","completedToday","dateCalc","date","formatRelative","locale","ru","sumOrders","set","orderStatus","OrdersItem","setPrice","identicalIngredients","find","slice","difference","lastIngredient","statusOrder","createdAt","images","el","image_large","bg","price__text","OrdersList","orders","RootOrdersDetailsAction","socketActionCreators","start","closed","wsUrl","wsActions","orderDetailsActionCreator","GET_ORDERS_DETAILS","DELETE_ORDERS_DETAILS","OrderInfo","__v","countItem","OrderDetails","setTotal","oderDetails","orderDetails","identicalIngredientsDetails","statusOrderDetails","findI","useMemo","ingredientsArray","ingredient","forEach","x","some","ing","findElement","ingredientsDetailsArray","arrDetails","content","structure","OrdersFeedPage","getOrdersDetails","deleteOrdersDetails","NotFoundPage","IngredientPage","items","OrderDetailsPage","includes","itemFilter","OrdersHistoryPage","clickIngredients","container","reverse","App","dataRequest","dataFailed","action","dataSuccess","dataError","path","initialState","getUserFailed","connected","updatedAt","rootReducer","combineReducers","error","message","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","next","WebSocket","onopen","onerror","onmessage","parse","onclose","createStore","StrictMode","basename"],"mappings":"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","file":"static/js/main.bed43c00.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"formProfile_form__3p5X_\",\"button\":\"formProfile_button__1LuWd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"ordersList_main__3hNQ3\",\"link\":\"ordersList_link__23YU8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"app_main__3xHIX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"mainPage_main__285Jk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"burgerConstructor_main__1d0wR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"totalFeedOrders_main__39Lj8\",\"status\":\"totalFeedOrders_status__1EqkT\",\"wrapper\":\"totalFeedOrders_wrapper__BuU2t\",\"subtitle\":\"totalFeedOrders_subtitle__363zh\",\"subtitle__all\":\"totalFeedOrders_subtitle__all__3qNfl\",\"text\":\"totalFeedOrders_text__2GGuV\",\"text__green\":\"totalFeedOrders_text__green__1oAoQ\",\"text__large\":\"totalFeedOrders_text__large__vHSmn\",\"all\":\"totalFeedOrders_all__11rZG\",\"list\":\"totalFeedOrders_list__2b5il\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"icon_icon__1zu7v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile_main__DA8v3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"notFoundPage_main__Mgff1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"ingredientPage_main__3pVHj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"ingredientDetails_main__Xp6Td\",\"img\":\"ingredientDetails_img__-tSmY\",\"name\":\"ingredientDetails_name__1TGu2\",\"energyValue\":\"ingredientDetails_energyValue__3AwBW\",\"block\":\"ingredientDetails_block__1da6P\",\"text\":\"ingredientDetails_text__1ejcU\",\"value\":\"ingredientDetails_value__3duIP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"ordersItem_main__2qRr-\",\"wrapper\":\"ordersItem_wrapper__USJwX\",\"number\":\"ordersItem_number__2z8sK\",\"title\":\"ordersItem_title__2MKK-\",\"status\":\"ordersItem_status__3QK3-\",\"images\":\"ordersItem_images__1_J_W\",\"item\":\"ordersItem_item__3vFFR\",\"img\":\"ordersItem_img__2CNde\",\"price\":\"ordersItem_price__3kCRf\",\"price__text\":\"ordersItem_price__text__Z-y4b\",\"icon\":\"ordersItem_icon__4p6H4\",\"difference\":\"ordersItem_difference__1PTyt\",\"bg\":\"ordersItem_bg__2lO2v\"};","import { TData } from \"../../types/types\";\n\nexport enum RootDataAction {\n    GET_DATA_REQUEST = 'GET_ITEM_REQUEST',\n    GET_DATA_SUCCESS = 'GET_ITEMS_SUCCESS',\n    GET_DATA_FAILED = 'GET_ITEMS_FAILED'\n}\n\ninterface IDataRequest {\n    type: RootDataAction.GET_DATA_REQUEST,\n}\n\ninterface IDataSuccess {\n    type: RootDataAction.GET_DATA_SUCCESS,\n    payload: TData[]\n}\n\ninterface IDataFailed {\n    type: RootDataAction.GET_DATA_FAILED,\n}\n\nexport type TDataAction =\n    | IDataRequest\n    | IDataSuccess\n    | IDataFailed\n\nexport const dataActionCreator = {\n    dataRequest: (): TDataAction => ({ type: RootDataAction.GET_DATA_REQUEST }),\n    dataSuccess: (payload: TData[]): TDataAction => ({ type: RootDataAction.GET_DATA_SUCCESS, payload }),\n    dataError: (): TDataAction => ({ type: RootDataAction.GET_DATA_FAILED })\n}\n","import { ThunkAction } from 'redux-thunk';\nimport { Action, ActionCreator } from 'redux';\nimport { store } from '../store/store';\nimport {\n\tTypedUseSelectorHook,\n\tuseDispatch as dispatchHook,\n\tuseSelector as selectorHook,\n} from 'react-redux';\nimport { TAppActions } from './actions';\n\nexport type TRootState = ReturnType<typeof store.getState>;\n\nexport type AppDispatch = typeof store.dispatch;\n\nexport type AppThunk<TReturn = void> = ActionCreator<\n\tThunkAction<TReturn, Action, TRootState, TAppActions>\n>;\n\nexport const useSelector: TypedUseSelectorHook<TRootState> = selectorHook;\n\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\n","import React, { FC } from 'react';\nimport styles from './appHeader.module.css';\nimport { BurgerIcon, ListIcon, Logo, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport clsx from \"clsx\";\nimport { Link } from 'react-router-dom';\nimport { useSelector } from '../../types';\n\nconst AppHeader: FC = () => {\n    const user = useSelector(state => state.userReducer);\n\n    const { isAuth, isUser } = user;\n\n    return (\n        <section className={ styles.main }>\n            <div className={ styles.main__wrapper }>\n                <div className={ styles.wrapper }>\n                    <nav className={ styles.nav }>\n                        <Link to='/' className={ clsx(styles.item, 'mr-2') }>\n                            <BurgerIcon type=\"primary\" />\n                            <p className={ clsx(styles.text, 'text text_type_main-default ml-2') }></p>\n                        </Link>\n                        <Link to='/feed' className={ styles.item }>\n                            <ListIcon type=\"secondary\" />\n                            <p className={ clsx('text text_type_main-default ml-2 text_color_inactive') }> </p>\n                        </Link>\n                    </nav>\n                    <Link to='/'>\n                        <Logo />\n                    </Link>\n                </div>\n                <Link to='/profile' className={ styles.item }>\n                    <ProfileIcon type=\"secondary\" />\n                    <p className={ clsx('text text_type_main-default ml-2 text_color_inactive') }>{isAuth && isUser ? user.user.name : ' '}</p>\n                </Link>\n            </div>\n        </section>\n    );\n};\n\nexport default AppHeader;","export const setCookie = (name: string, value: string, props?: any) => {\n    props = props || {};\n    let exp = props.expires;\n    if (typeof exp == 'number' && exp) {\n        const d = new Date();\n        d.setTime(d.getTime() + exp * 1000);\n        exp = props.expires = d;\n    }\n    if (exp && exp.toUTCString) {\n        props.expires = exp.toUTCString();\n    }\n    value = encodeURIComponent(value);\n    let updatedCookie = name + '=' + value;\n    for (const propName in props) {\n        updatedCookie += '; ' + propName;\n        const propValue = props[propName];\n        if (propValue !== true) {\n            updatedCookie += '=' + propValue;\n        }\n    }\n    document.cookie = updatedCookie;\n}\n\nexport const getCookie = (name: string) => {\n    const matches = document.cookie.match(\n        // eslint-disable-next-line\n        new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\n    );\n    return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nexport const deleteCookie = (name: string) => {\n    setCookie(name, '', {expires: -1})\n}","import { getCookie } from \"./cookie\";\n\nexport const API_URL: string =  'https://norma.nomoreparties.space/api';\n\nexport const WS_URL: string = 'wss://norma.nomoreparties.space/orders';\n\nexport  const url = getCookie(\"accessToken\")?.split(\"Bearer \").join(\"\");","import { TNumberOrder } from \"../../types/types\";\n\nexport enum RootNumberOrdersActions {\n    GET_NUMBER_ORDERS_REQUEST = 'GET_NUMBER_ORDERS_REQUEST',\n    GET_NUMBER_ORDERS_SUCCESS = 'GET_NUMBER_ORDERS_SUCCESS',\n    GET_NUMBER_ORDERS_FAILED = 'GET_NUMBER_ORDERS_FAILED'\n}\n\ninterface INumberOrdersRequest {\n    type: RootNumberOrdersActions.GET_NUMBER_ORDERS_REQUEST,\n}\n\ninterface INumberOrdersSuccess {\n    type: RootNumberOrdersActions.GET_NUMBER_ORDERS_SUCCESS,\n    payload: TNumberOrder\n}\n\ninterface INumberOrdersFailed {\n    type: RootNumberOrdersActions.GET_NUMBER_ORDERS_FAILED,\n}\n\nexport type TNumberOrdersAction =\n    | INumberOrdersRequest\n    | INumberOrdersSuccess\n    | INumberOrdersFailed\n\nexport const numberOrdersActionCreator = {\n   numberOrdersRequest: (): TNumberOrdersAction => ({ type: RootNumberOrdersActions.GET_NUMBER_ORDERS_REQUEST }),\n    numberOrdersSuccess: (payload: TNumberOrder): TNumberOrdersAction => ({ type: RootNumberOrdersActions.GET_NUMBER_ORDERS_SUCCESS, payload }),\n    numberOrdersError: (): TNumberOrdersAction => ({ type: RootNumberOrdersActions.GET_NUMBER_ORDERS_FAILED })\n}","import { TUser } from \"../../types/types\";\n\nexport enum RootUserActions {\n    GET_REGISTRATION_REQUEST = 'GET_REGISTRATION_REQUEST',\n    GET_REGISTRATION_SUCCESS = 'GET_REGISTRATION_SUCCESS',\n    GET_REGISTRATION_FAILED = 'GET_REGISTRATION_FAILED',\n\n    GET_LOGIN_REQUEST = 'GET_LOGIN_REQUEST',\n    GET_LOGIN_SUCCESS = 'GET_LOGIN_SUCCESS',\n    GET_LOGIN_FAILED = 'GET_LOGIN_FAILED',\n\n    LOG_OUT = 'LOG_OUT',\n\n    GET_USER_REQUEST = 'GET_USER_REQUEST',\n    GET_USER_SUCCESS = 'GET_USER_SUCCESS',\n    GET_USER_FAILED = 'GET_USER_FAILED',\n\n    USER_UPDATE_REQUEST = 'USER_UPDATE_REQUEST',\n    USER_UPDATE_SUCCESS = 'USER_UPDATE_SUCCESS',\n    USER_UPDATE_FAILED = 'USER_UPDATE_FAILED',\n\n    SET_EDIT = 'SET_EDIT'\n}\n\ninterface IRegistrationRequest {\n    type: RootUserActions.GET_REGISTRATION_REQUEST,\n}\n\ninterface IRegistrationSuccess {\n    type: RootUserActions.GET_REGISTRATION_SUCCESS,\n    payload: TUser\n}\n\ninterface IRegistrationFailed {\n    type: RootUserActions.GET_REGISTRATION_FAILED,\n}\n\ninterface ILoginRequest{\n    type: RootUserActions.GET_LOGIN_REQUEST,\n}\n\ninterface ILoginSuccess {\n    type: RootUserActions.GET_LOGIN_SUCCESS,\n    payload: TUser\n}\n\ninterface ILoginFailed {\n    type: RootUserActions.GET_LOGIN_FAILED,\n}\n\ninterface ILogOut {\n    type: RootUserActions.LOG_OUT\n}\n\ninterface IGetUserRequest {\n    type: RootUserActions.GET_USER_REQUEST,\n}\n\ninterface IGetUserSuccess {\n    type: RootUserActions.GET_USER_SUCCESS,\n    payload: TUser\n}\n\ninterface IGetUserFailed {\n    type: RootUserActions.GET_USER_FAILED,\n}\n\ninterface IUserUpdateRequest {\n    type: RootUserActions.USER_UPDATE_REQUEST,\n}\n\ninterface IUserUpdateSuccess {\n    type: RootUserActions.USER_UPDATE_SUCCESS,\n    payload: TUser\n}\n\ninterface IUserUpdateFailed {\n    type: RootUserActions.USER_UPDATE_FAILED,\n}\n\ninterface ISetEdit {\n    type: RootUserActions.SET_EDIT,\n    payload: TUser\n}\n\nexport type TUserAction =\n    | IRegistrationRequest\n    | IRegistrationSuccess\n    | IRegistrationFailed\n    | ILoginRequest\n    | ILoginSuccess\n    | ILoginFailed\n    | ILogOut\n    | IGetUserRequest\n    | IGetUserSuccess\n    | IGetUserFailed\n    | IUserUpdateRequest\n    | IUserUpdateSuccess\n    | IUserUpdateFailed\n    | ISetEdit\n\n\nexport const userActionCreator = {\n    registrationRequest: (): TUserAction => ({ type: RootUserActions.GET_REGISTRATION_REQUEST }),\n    registrationSuccess: (payload: TUser): TUserAction  => ({ type: RootUserActions.GET_REGISTRATION_SUCCESS, payload }),\n    registrationFailed: (): TUserAction => ({ type: RootUserActions.GET_REGISTRATION_FAILED }),\n\n    loginRequest: (): TUserAction => ({ type: RootUserActions.GET_LOGIN_REQUEST }),\n    loginSuccess: (payload: TUser): TUserAction => ({ type: RootUserActions.GET_LOGIN_SUCCESS, payload }),\n    loginFailed: (): TUserAction => ({ type: RootUserActions.GET_LOGIN_FAILED }),\n\n    out: (): TUserAction => ({ type: RootUserActions.LOG_OUT }),\n\n    userRequest: (): TUserAction => ({ type: RootUserActions.GET_USER_REQUEST }),\n    userSuccess: (payload: TUser): TUserAction => ({ type: RootUserActions.GET_USER_SUCCESS, payload }),\n    userFailed: (): TUserAction => ({ type: RootUserActions.GET_USER_FAILED }),\n\n    userUpdateRequest: (): TUserAction => ({ type: RootUserActions.USER_UPDATE_REQUEST }),\n    userUpdateSuccess: (payload: TUser): TUserAction => ({ type: RootUserActions.USER_UPDATE_SUCCESS, payload }),\n    userUpdateFailed: (): TUserAction => ({ type: RootUserActions.USER_UPDATE_FAILED }),\n\n    setEdit: (payload: TUser): TUserAction => ({ type: RootUserActions.SET_EDIT, payload })\n}\n\n\n","import { TIngredientDetails } from \"../../types/types\";\n\nexport enum RootDetailsAction {\n    GET_DETAILS = 'ADD_DETAILS',\n    DELETE_DETAILS = 'DELETE_DETAILS'\n}\n\ninterface IGetDetails {\n    type: RootDetailsAction.GET_DETAILS,\n    payload: TIngredientDetails\n}\n\ninterface IDeleteDetails {\n    type: RootDetailsAction.DELETE_DETAILS,\n}\n\nexport type TDetailsAction =\n    | IGetDetails\n    | IDeleteDetails\n\nexport const detailsActionCreator = {\n    getDetails: (payload: TIngredientDetails): TDetailsAction => ({ type: RootDetailsAction.GET_DETAILS, payload }),\n    deleteDetails: (): TDetailsAction => ({ type: RootDetailsAction.DELETE_DETAILS })\n}","import { API_URL } from \"./constants\";\nimport { dataActionCreator } from \"../store/data/data.actions\";\nimport { numberOrdersActionCreator } from \"../store/numberOrders/numberOrders.actions\";\nimport { setCookie, getCookie, deleteCookie } from \"./cookie\";\nimport { userActionCreator } from \"../store/user/user.actions\";\nimport { AppDispatch, AppThunk} from \"../types\";\n\ntype TGetUserUpdate = {\n    name?: string;\n    email?: string;\n    password?: string;\n}\n\ntype TRegister = {\n    name: string;\n    email: string;\n    password: string;\n}\n\ntype TLogin = {\n    email: string;\n    password: string;\n}\n\nconst { registrationRequest, registrationSuccess, registrationFailed, loginRequest, loginSuccess, loginFailed, userRequest,\n    userSuccess, userFailed, userUpdateRequest, userUpdateSuccess, userUpdateFailed } = userActionCreator;\n\nconst checkResponse = (res: Response) => {\n    if (res.ok) {\n        return res.json();\n    }\n    return Promise.reject(` ${res.status}`);\n};\n\nexport const getData: AppThunk = () => {\n    return (dispatch: AppDispatch) => {\n        const { dataRequest, dataSuccess, dataError } = dataActionCreator;\n        dispatch(dataRequest())\n        fetch(`${ API_URL }/ingredients`)\n            .then(res =>  checkResponse(res))\n            .then(data => dispatch(dataSuccess(data.data)))\n            .catch(err => {\n                console.log(err)\n                dispatch(dataError())\n            })\n    }\n};\n\nexport const getNumberOrders: AppThunk = (data: {}) => {\n    return (dispatch: AppDispatch) => {\n        const { numberOrdersRequest, numberOrdersSuccess, numberOrdersError,} = numberOrdersActionCreator;\n        dispatch(numberOrdersRequest())\n        fetch(`${ API_URL }/orders`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                Authorization:  getCookie(\"accessToken\") || ''\n            },\n            body: JSON.stringify({\n                ingredients: data\n            })\n        })\n            .then(res => {\n                return checkResponse(res)\n            })\n            .then(data => dispatch(numberOrdersSuccess(data)))\n            .catch(err => {\n                console.log(err)\n                dispatch(numberOrdersError())})\n    }\n};\n\nexport const forgotPassword = (email: string) => {\n    return fetch(`${ API_URL }/password-reset`, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            email: email\n        })\n    })\n        .then(res => checkResponse(res))\n        .catch(err => console.log(err))\n}\n\nexport const resetPassword = (password: string, token: string) => {\n    return fetch(`${ API_URL }/password-reset/reset`, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            password: password,\n            token: token\n        })\n    })\n        .then(res => checkResponse(res))\n        .catch(err => console.log(err))\n}\n\nconst updateToken = async (token: string) => {\n    return await fetch(`${ API_URL }/auth/token`, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n            token: token,\n        }),\n    }).then(res => checkResponse(res))\n};\n\nconst getUserRequest = async () => {\n    return await fetch(`${ API_URL }/auth/user`, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n            Authorization: getCookie(\"accessToken\") || ''\n        },\n    })\n        .then(res => checkResponse(res))\n};\n\nconst getUserUpdateRequest = async (data: TGetUserUpdate) => {\n    return await fetch(`${ API_URL }/auth/user`, {\n        method: 'PATCH',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n            Authorization: getCookie(\"accessToken\") || ''\n        },\n        body: JSON.stringify(data)\n    })\n        .then(res => checkResponse(res))\n}\n\nexport const userUpdate: AppThunk = (data: TGetUserUpdate) => {\n    return async (dispatch: AppDispatch) => {\n        dispatch(userUpdateRequest())\n        try {\n            const res = await getUserUpdateRequest(data);\n            (res && res.success) && dispatch(userUpdateSuccess(res.user));\n        } catch (err) {\n            if (err === \" 403\") {\n                deleteCookie(\"accessToken\");\n                const refreshToken = getCookie(\"refreshToken\") || '';\n                const token = await updateToken(refreshToken);\n                if (token.success) {\n                    setCookie(\"accessToken\", token.accessToken);\n                    setCookie(\"refreshToken\", token.refreshToken);\n                }\n                const res = await getUserUpdateRequest(data);\n                if (res && res.success) {\n                    dispatch(userUpdateSuccess(res.user))\n                }\n            } else {\n                dispatch(userUpdateFailed())\n            }\n        }\n    }\n};\n\n\nexport const getUser: AppThunk = () => {\n    return async (dispatch: AppDispatch) => {\n        dispatch(userRequest())\n        try {\n            const res = await getUserRequest();\n            (res && res.success) && await dispatch(userSuccess(res.user));\n        } catch (err) {\n            console.log(err)\n            if (err === \" 403\") {\n                deleteCookie(\"accessToken\");\n                const refreshToken = getCookie(\"refreshToken\") || '';\n                const token = await updateToken(refreshToken);\n                if (token.success) {\n                    setCookie(\"accessToken\", token.accessToken);\n                    setCookie(\"refreshToken\", token.refreshToken);\n                }\n                const res = await getUserRequest();\n                if (res && res.success) {\n                    dispatch(userSuccess(res.user))\n                }\n            } else {\n                dispatch(userFailed())\n            }\n        }\n    }\n};\n\nexport const register: AppThunk = (data: TRegister) => {\n    return (dispatch: AppDispatch) => {\n\n        dispatch(registrationRequest())\n        fetch(`${ API_URL }/auth/register`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                name: data.name,\n                email: data.email,\n                password: data.password\n            })\n        })\n            .then(res => checkResponse(res))\n            .then(data => {\n                dispatch(registrationSuccess(data))\n                dispatch(loginSuccess(data))\n                getUser()})\n            .catch(() => {dispatch(registrationFailed())})\n    }\n};\n\nexport const login: AppThunk = (data: TLogin) => {\n    return (dispatch: AppDispatch) => {\n        dispatch(loginRequest())\n        fetch(`${ API_URL }/auth/login`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                email: data.email,\n                password: data.password\n            })\n        })\n            .then(res => {\n               return  checkResponse(res)\n            })\n            .then(data => {\n                if (data) {\n                    setCookie('accessToken', data.accessToken);\n                    setCookie('refreshToken', data.refreshToken);\n                    dispatch(loginSuccess(data))\n                    getUser()\n                }\n            })\n            .catch(err => {\n                console.log(err)\n                dispatch(loginFailed())})\n    }\n};\n\nexport const logOut = () => {\n    fetch(`${ API_URL }/auth/logout`, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n            token: getCookie(\"refreshToken\")\n        })\n    })\n        .then(res => checkResponse(res))\n        .then(() => {\n            deleteCookie('accessToken');\n            deleteCookie('refreshToken');\n        })\n        .catch(err => console.log(err))\n};","import React, { useEffect, useState, FC } from 'react';\nimport { Route, Redirect, useLocation, RouteProps } from \"react-router-dom\";\nimport { useDispatch, useSelector } from '../../types';\nimport { getUser } from \"../../utils/Api\";\nimport { getCookie } from \"../../utils/cookie\";\nimport { Location } from 'history';\n\nexport const ProtectedRoute: FC<RouteProps & { onlyUnAuth?: boolean }> = ({ onlyUnAuth, children, ...rest }) => {\n    const location = useLocation<{ from: Location}>();\n    const dispatch = useDispatch();\n\n    const isUser = useSelector((state => state.userReducer.isUser));\n\n    const isToken = getCookie(\"accessToken\");\n    const [ isUserLoaded, setUserLoaded ] = useState(false);\n\n\n    const init = () => {\n        if(isUser) {\n            dispatch(getUser())\n        }\n        setUserLoaded(true);\n    };\n\n    useEffect(() => {\n        init()\n    }, []);// eslint-disable-line react-hooks/exhaustive-deps\n\n    if (!isUserLoaded) {\n        return null;\n    }\n\n    if (!isUser\n        && !isToken\n        && location.pathname !== '/login'\n        && location.pathname !== '/register'\n        && location.pathname !== '/forgot-password'\n        && location.pathname !== '/reset-password') {\n        return (\n            <Redirect\n                to={{\n                    pathname: \"/login\",\n                    state: { from: location },\n                }}\n            />\n        );\n    }\n\n    if (onlyUnAuth && isUser) {\n        const { from } = location.state || { from: { pathname: '/' } }\n        return <Redirect to={ from } />\n    }\n    return <Route {...rest} render={({ location }) =><>{children}</>} />;\n};\n","import { useState } from 'react';\n\nexport const useModal = ()  => {\n    const [ isOpen, setIsOpen ] = useState<boolean>(false);\n    const openPopup = () => setIsOpen(true);\n    const closePopup = () => setIsOpen(false);\n    const closePopupEsc = () => setIsOpen(false);\n\n    return { isOpen, openPopup, closePopup, closePopupEsc };\n};\n","import React, { FC } from 'react';\nimport styles from './ingredientsItem.module.css';\nimport { CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components'\nimport { useModal } from \"../../hooks/useModal\";\nimport clsx from \"clsx\";\nimport { useDrag } from \"react-dnd\";\nimport { useSelector } from '../../types';\n\ntype TIngredientsItem = {\n    data: {\n        image: string;\n        price: number;\n        name: string;\n        _id: string;\n    },\n    onClick: (item: any) => void;\n}\n\nconst IngredientsItem: FC<TIngredientsItem> = ({ data, onClick }) => {\n   const { closePopupEsc } = useModal();\n\n   const { image, price, name, _id } = data;\n\n   const [, ref] = useDrag({\n       type: 'ingredients',\n       item: data\n   });\n\n    const allItems = useSelector( state => [state.constructorData.bun, state.constructorData.bun, ...state.constructorData.ingredients]);\n\n    //  \n    const count = allItems.filter(item => item?._id === _id).length\n\n    return (\n        <>\n            <li className={ styles.main } onClick={() => onClick(data)} onKeyDown={ closePopupEsc } ref={ ref }>\n                <img className={ styles.img } src={ image } alt=\" \"/>\n                <div className={ styles.main__price }>\n                    <p className={ clsx(styles.price, 'text_type_digits-default') }>{ price }</p>\n                    <CurrencyIcon type=\"primary\" />\n                </div>\n                <p className={ clsx(styles.name, 'text_type_main-default') }>{ name }</p>\n                { count > 0 && <Counter count={ count } size=\"default\" />}\n            </li>\n        </>\n    );\n};\n\nexport default IngredientsItem;","import React, { FC } from 'react';\nimport styles from './ingredientsList.module.css';\nimport IngredientsItem from \"../IngredientsItem/IngredientsItem\";\nimport clsx from \"clsx\";\nimport { useSelector } from '../../types';\nimport { Link, useLocation } from \"react-router-dom\";\nimport {TIngredientDetails} from \"../../types/types\";\n\ntype TIngredientsList = {\n    onClick: (item: TIngredientDetails) => void;\n    scrollHandler: (item: any) => void;\n}\n\nconst IngredientsList: FC<TIngredientsList> = ({ onClick, scrollHandler }) => {\n    const data = useSelector(state => state.data.ingredientsData)\n\n    const buns = data.filter(item => item.type === 'bun');\n    const sauce = data.filter(item => item.type === 'sauce');\n    const main = data.filter(item => item.type === 'main');\n\n    const location = useLocation();\n\n    return (\n        <>\n            <section className={ styles.main } onScroll={ scrollHandler }>\n                <h2 className={ clsx(styles.subtitle, 'text_type_main-medium') } id=''></h2>\n                <ul className={ styles.ulList }>\n                    {\n                        buns.map((item) => {\n                            return <Link className={ styles.link }\n                                         data-at='ingredient'\n                                         key={item._id}\n                                         to={ { pathname: `ingredients/${item._id}`,\n                                             state: { background: location }} }\n                            >\n                                <IngredientsItem data={ item } key={ item._id } onClick={ onClick }/>\n                            </Link>\n                        })\n                    }\n                </ul>\n\n                <h2 className={ clsx(styles.subtitle, 'text_type_main-medium') } id=''></h2>\n                <ul className={ styles.ulList }>\n                    {\n                        sauce.map((item) => {\n                            return <Link className={ styles.link }\n                                         data-at='ingredient'\n                                         key={item._id}\n                                         to={ { pathname: `ingredients/${item._id}`,\n                                             state: { background: location }} }\n                            >\n                                <IngredientsItem data={ item } key={ item._id } onClick={ onClick }/>\n                            </Link>\n                        })\n                    }\n                </ul>\n                <h2 className={ clsx(styles.subtitle, 'text_type_main-medium') } id=''></h2>\n                <ul className={ styles.ulList }>\n                    {\n                        main.map((item) => {\n                            return <Link className={ styles.link }\n                                         data-at='ingredient'\n                                         key={item._id}\n                                         to={ { pathname: `ingredients/${item._id}`,\n                                             state: { background: location }} }\n                            >\n                                <IngredientsItem data={ item } key={ item._id } onClick={ onClick }/>\n                            </Link>\n                        })\n                    }\n                </ul>\n            </section>\n        </>\n    );\n};\n\nexport default IngredientsList;","import React, { useRef, FC, MouseEvent } from 'react';\nimport styles from'./modalOverlay.module.css';\nimport clsx from \"clsx\";\n\ntype TModalOverlay = {\n    isOpen: boolean;\n    closePopup: () => void;\n}\n\nconst ModalOverlay: FC<TModalOverlay> = ({ isOpen, closePopup }) => {\n\n    const overlayRef = useRef<HTMLInputElement>(null)\n\n    const closeOverlay: (event: MouseEvent<HTMLInputElement>) => void = (event) => {\n        if(isOpen && overlayRef.current && overlayRef.current.contains(event.target as Node)){\n            closePopup()}\n    }\n\n    return (\n        <section className={ clsx(styles.main, {[styles.hidden] : !isOpen}) } ref={ overlayRef } onClick={ closeOverlay }/>\n\n    );\n};\n\nexport default ModalOverlay;","import React, { useEffect, FC } from 'react';\nimport ReactDOM from \"react-dom\";\nimport styles from './modal.module.css';\nimport ModalOverlay from \"../ModalOverlay/ModalOverlay\";\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport clsx from \"clsx\";\n\ntype IModal = {\n    isOpen: boolean;\n    closePopup: () => void;\n    header?: string | number;\n    isOrders?: boolean;\n}\n\nconst ModalIngredients: FC<IModal> = ({ children, header, closePopup }) => {\n    return (\n        <section className={ styles.main }>\n            <div className={ styles.header }>\n                <h1 className={ clsx(styles.title, 'text_type_main-large') }>{ header }</h1>\n                <div className={ styles.icon }>\n                    <CloseIcon type=\"primary\" onClick={ closePopup }/>\n                </div>\n            </div>\n            { children }\n        </section>\n    );\n}\n\nconst ModalOrderInfo: FC<IModal> = ({ children, header, closePopup }) => {\n    return (\n      <section className={ clsx(styles.main, styles.main__orders) }>\n          <div className={ styles.header }>\n              <h1 className={ clsx(styles.title, 'text_type_digits-default') }>{ `#${ header }` }</h1>\n              <div className={ styles.icon }>\n                  <CloseIcon type=\"primary\" onClick={ closePopup }/>\n              </div>\n          </div>\n          { children }\n      </section>\n    );\n}\n\nconst Modal: FC<IModal> = ({ isOrders, children, isOpen, closePopup, header }) => {\n    const reactModals: any = document.getElementById('modals');\n\n    const closePopupEsc: (e: KeyboardEvent) => void = (e) => {\n        if (e.key ==='Escape') {\n            closePopup()\n        }\n    }\n\n    useEffect(() => {\n        document.addEventListener('keydown', closePopupEsc)\n\n        return () => document.removeEventListener('keydown', closePopupEsc)\n    })\n\n    return ReactDOM.createPortal(\n        <>\n            <ModalOverlay isOpen={ isOpen } closePopup={ closePopup } />\n            {isOrders ?\n                <ModalOrderInfo isOpen={ isOpen } closePopup={ closePopup } header={ header } children={ children } />\n                :\n                <ModalIngredients isOpen={ isOpen } closePopup={ closePopup } header={ header } children={children}/>\n            }\n        </>, reactModals\n        )\n};\n\nexport default Modal;","import React, { FC } from 'react';\nimport styles from './ingredientDetails.module.css';\nimport clsx from \"clsx\";\nimport { useSelector } from '../../types';\nimport { TData } from \"../../types/types\";\n\ntype TIngredientDetails = {\n    details?: TData;\n}\n\nconst IngredientDetails: FC<TIngredientDetails> = ({ details }) => {\n    const ingredients = useSelector(state => state.details.ingredientsDetails);\n    const { image, name, calories, proteins, fat, carbohydrates } = ingredients;\n\n    return (\n        <section className={ styles.main }>\n            <img className={ styles.img } src={ image || details?.image } alt=\" \"/>\n            <p className={ clsx(styles.name, 'text_type_main-medium') }>{ name || details?.name }</p>\n            <div className={ styles.energyValue }>\n                <div className={ styles.block }>\n                    <p className={ clsx(styles.text, 'text_type_main-default') }>,</p>\n                    <p className={ clsx(styles.value, 'text_type_digits-default') }>{ calories || details?.calories }</p>\n                </div>\n                <div className={ styles.block }>\n                    <p className={ clsx(styles.text, 'text_type_main-default') }>, </p>\n                    <p className={ clsx(styles.value, 'text_type_digits-default') }>{ proteins || details?.proteins }</p>\n                </div>\n                <div className={ styles.block }>\n                    <p className={ clsx(styles.text, 'text_type_main-default') }>, </p>\n                    <p className={ clsx(styles.value, 'text_type_digits-default') }>{ fat || details?.fat }</p>\n                </div>\n                <div className={ styles.block }>\n                    <p className={ clsx(styles.text, 'text_type_main-default') }>, </p>\n                    <p className={ clsx(styles.value, 'text_type_digits-default') }>{ carbohydrates || details?.carbohydrates }</p>\n                </div>\n            </div>\n        </section>\n    );\n};\n\nexport default IngredientDetails;","import { TData } from '../../types/types';\n\nexport enum RootConstructorAction {\n\tADD_BUNS = 'ADD_BUNS',\n\tADD_INGREDIENTS = 'ADD_INGREDIENTS',\n\tMOVE_INGREDIENT = 'MOVE_INGREDIENT',\n\tDELETE_INGREDIENT = 'DELETE_INGREDIENT',\n\tClEAR_INGREDIENT = 'ClEAR_INGREDIENT',\n}\n\ninterface IAddBuns {\n\ttype: RootConstructorAction.ADD_BUNS;\n\tpayload: TData;\n}\n\ninterface IAddIngredients {\n\ttype: RootConstructorAction.ADD_INGREDIENTS;\n\tpayload: TData;\n}\n\ninterface IMoveIngredients {\n\ttype: RootConstructorAction.MOVE_INGREDIENT;\n\tpayload: TData[];\n}\n\ninterface IDeleteIngredients {\n\ttype: RootConstructorAction.DELETE_INGREDIENT;\n\tpayload?: number;\n}\n\ninterface IClearIngredients {\n\ttype: RootConstructorAction.ClEAR_INGREDIENT;\n}\n\nexport type TConstructorAction =\n\t| IAddBuns\n\t| IAddIngredients\n\t| IMoveIngredients\n\t| IDeleteIngredients\n\t| IClearIngredients;\n\nexport const constructorActionCreator = {\n\taddBuns: (payload: TData): TConstructorAction => ({ type: RootConstructorAction.ADD_BUNS, payload }),\n\taddIngredients: (payload: TData): TConstructorAction => ({ type: RootConstructorAction.ADD_INGREDIENTS, payload }),\n\tmove: (payload: TData[]): TConstructorAction => ({ type: RootConstructorAction.MOVE_INGREDIENT, payload }),\n\tdeleteItems: (payload?: number): TConstructorAction => ({ type: RootConstructorAction.DELETE_INGREDIENT, payload }),\n\tclear: (): TConstructorAction => ({ type: RootConstructorAction.ClEAR_INGREDIENT })\n}","import React, {useState, FC } from 'react';\nimport styles from './burgerIngredients.module.css';\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components'\nimport IngredientsList from \"../IngredientsList/IngredientsList\";\nimport clsx from \"clsx\";\nimport Modal from \"../Modal/Modal\";\nimport IngredientDetails from \"../IngredientDetails/IngredientDetails\";\nimport { useModal } from \"../../hooks/useModal\";\nimport { useDispatch } from '../../types';\nimport { detailsActionCreator } from \"../../store/details/details.actions\";\nimport { useHistory } from \"react-router-dom\";\nimport { TIngredientDetails } from \"../../types/types\";\n\nconst BurgerIngredients: FC = () => {\n    const { isOpen, closePopup, openPopup} = useModal();\n    const [ current, setCurrent ] = useState<string>('');\n\n    const { getDetails, deleteDetails } = detailsActionCreator;\n\n    const history = useHistory();\n\n    const dispatch = useDispatch();\n\n    const clickIngredients: (item: TIngredientDetails) => void  = (item) => {\n        dispatch(getDetails(item));\n        openPopup();\n    };\n\n    const closeModalDetails = () => {\n        dispatch(deleteDetails());\n        closePopup();\n        history.push('/')\n    };\n\n    const onClickTab: (tab: string) => void = (tab: string) => {\n        setCurrent(tab);\n        const element = document.getElementById(tab);\n        element && element.scrollIntoView({behavior: 'smooth'});\n    };\n\n    const scrollHandler: (e: any) => void = (e) => {\n        const target = e.target;\n        const scroll = target.scrollTop;\n        if(scroll > 0 && scroll < 300) {\n            setCurrent('')\n        }else if ( scroll > 300 && scroll < 840) {\n            setCurrent('')\n        } else {\n            setCurrent('')\n        }\n    }\n\n    return (\n        <section className={ styles.main }>\n            <h1 className={ clsx(styles.text, 'text text_type_main-large') }> </h1>\n            <div className={styles.tab}>\n                <Tab active={ current === '' } value='' onClick={ onClickTab }></Tab>\n                <Tab active={ current === '' } value='' onClick={ onClickTab }></Tab>\n                <Tab active={ current === '' } value='' onClick={ onClickTab }></Tab>\n            </div>\n            <IngredientsList onClick={ clickIngredients }  scrollHandler={ scrollHandler }/>\n            {isOpen &&\n                <Modal  isOpen={ isOpen }\n                       closePopup={ closeModalDetails }\n                       header=' '>\n                    <IngredientDetails />\n                </Modal>}\n        </section>\n    );\n};\n\n\nexport default BurgerIngredients;","import { TAllOrders } from \"../../types/types\";\n\nexport enum RootSocketAction {\n    start = 'WS_CONNECTION_START',\n    success = 'WS_CONNECTION_SUCCESS',\n    error = 'WS_CONNECTION_ERROR',\n    closed = 'WS_CONNECTION_CLOSED',\n    message = 'WS_GET_MESSAGE',\n}\n\nexport type TWSActions = {\n    start: typeof RootSocketAction.start;\n    success: typeof RootSocketAction.success;\n    error: typeof RootSocketAction.error;\n    closed: typeof RootSocketAction.closed;\n    message: typeof RootSocketAction.message;\n}\n\ninterface IWSStart {\n    type: RootSocketAction.start,\n    payload: object\n}\n\ninterface IWSSuccess {\n    type: RootSocketAction.success\n}\n\ninterface IWSError {\n    type: RootSocketAction.error\n}\n\ninterface IWSClosed {\n    type: RootSocketAction.closed\n}\n\ninterface IWSGet {\n    type: RootSocketAction.message,\n    payload: TAllOrders\n}\n\nexport type TSocketAction =\n    | IWSStart\n    | IWSSuccess\n    | IWSError\n    | IWSClosed\n    | IWSGet\n\nexport const socketActionCreators = {\n    start: (url: string): IWSStart => ({ type: RootSocketAction.start, payload: { url } }),\n    success: (): IWSSuccess => ({ type: RootSocketAction.success}),\n    error: (): IWSError => ({ type: RootSocketAction.error}),\n    close: (): IWSClosed => ({ type: RootSocketAction.closed }),\n    message: (payload: TAllOrders): IWSGet => ({ type: RootSocketAction.message, payload})\n}\n","import React, { useRef, FC } from 'react';\nimport styles from './constructorItem.module.css';\nimport { ConstructorElement, DragIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { useDrag, useDrop } from \"react-dnd\";\nimport { TData } from \"../../types/types\";\n\ntype TConstructorItem = {\n    item: TData;\n    index: number;\n    deleteHandler: (item: string) => void;\n    isLocked: boolean;\n    moveIngredients: (dragIndex: number, hoverIndex: number) => void;\n    hoverIndex?: number;\n}\n\nconst ConstructorItem: FC<TConstructorItem> = ({ item, index, deleteHandler, isLocked, moveIngredients }) => {\n    const ref = useRef<HTMLInputElement>(null);\n\n    const { id } = item;\n\n    //  \n    const [{ opacity }, dragRef] = useDrag({\n        type: 'item',\n        item: { id, index },\n        collect: (monitor) => ({\n            opacity: monitor.isDragging() ? 0 : 1\n        })\n    });\n\n    const [, dropRef] = useDrop({\n        accept: 'item',\n        collect(monitor) {\n            return {\n                handlerId: monitor.getHandlerId(),\n            }\n        },\n        hover: (item: { index: number}, monitor) => {\n            if (!ref.current) {\n                return\n            }\n\n            const dragIndex = item.index;\n            const hoverIndex = index;\n\n            if (dragIndex === hoverIndex) {\n                return\n            }\n            const hoverBoundingRect = ref.current?.getBoundingClientRect()\n            const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\n            const clientOffset= monitor.getClientOffset() as { x:number, y: number };\n\n            const hoverClientY = clientOffset.y - hoverBoundingRect.top\n\n            if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n                return\n            }\n\n            if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n                return\n            }\n\n            moveIngredients(dragIndex, hoverIndex)\n\n            item.index = hoverIndex\n        }\n    })\n\n    dragRef(dropRef(ref));\n\n    return (\n        (item) &&\n            <>\n                <div className={ styles.main } style={ { opacity } }  ref={ ref }>\n                    <div className={ styles.wrapper }>\n                        <DragIcon type=\"primary\"/>\n                    </div>\n                    <ConstructorElement\n                        isLocked={ isLocked }\n                        text={ item.name }\n                        price={ item.price }\n                        thumbnail={ item.image }\n                        handleClose={() => deleteHandler(item._id)}>\n                    </ConstructorElement>\n                </div>\n            </>\n    );\n}\n\nexport default ConstructorItem;","import React, { FC } from 'react';\nimport styles from './constructorList.module.css';\nimport { useSelector, useDispatch } from '../../types';\nimport { useDrop } from \"react-dnd\";\nimport clsx from \"clsx\";\nimport { constructorActionCreator } from \"../../store/constructor/constructor.actions\";\nimport { v4 as uuidv4 } from 'uuid';\nimport ConstructorItem from \"../ConstructorItem/ConstructorItem\";\nimport { ConstructorElement } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { TData } from \"../../types/types\";\n\ntype TConstructorList = {\n    item?: TData;\n    key?: number;\n}\n\nconst ConstructorList: FC<TConstructorList> = () => {\n    const dispatch = useDispatch();\n\n    const { addBuns, addIngredients, deleteItems, move } = constructorActionCreator;\n\n    const onDropHandler: (item: any) => void = (item) => {\n        if(item.type === 'bun') {\n            dispatch(addBuns(item));\n        } else {\n            dispatch(addIngredients({\n                ...item,\n                key: uuidv4()\n            }));\n        }\n    };\n\n    const { bun, ingredients } = useSelector(state => state.constructorData);\n\n    const [, ref] = useDrop({\n        accept: 'ingredients',\n        drop (item) {\n            onDropHandler(item)\n        }\n    });\n\n    //     \n    const deleteHandler: (item: TConstructorList) => void = (item) => {\n        dispatch(deleteItems(item.key));\n    };\n\n    // \n    const moveIngredients:  (dragIndex: number, hoverIndex: number) => void = (dragIndex, hoverIndex) => {\n        const newCards = [...ingredients];\n        const dragCard = ingredients[dragIndex];\n        newCards.splice(dragIndex, 1);\n        newCards.splice(hoverIndex, 0, dragCard);\n\n        dispatch(move(newCards));\n    };\n\n\n    return (\n        <ul className={ styles.main } ref={ ref } data-at='constructorBuns'>\n            {bun ? (\n                <li className={ styles.item__top } key={ uuidv4() }>\n                    <ConstructorElement\n                        isLocked={ true }\n                        type=\"top\"\n                        text={ `${bun.name} ()`}\n                        price={ bun.price }\n                        thumbnail={ bun.image }>\n                    </ConstructorElement>\n                </li>)\n                : (<p className={clsx(styles.text, 'text_type_main-medium')}>   </p>)\n            }\n            <div className={ styles.scroll } data-at='constructorIngredient'>\n                {ingredients.length > 0 ? (\n                    ingredients.map((item, index) => {\n                        return <li className={ styles.item } key={ item?.key }>\n                                    <ConstructorItem key={ item?.key } item={ item } index={ index } deleteHandler={ () => deleteHandler(item) } moveIngredients={ moveIngredients } isLocked={ false }/>\n                        </li>})\n                        )\n                    : (<p className={clsx(styles.text, 'text_type_main-medium')}>   .<br/>    </p>)\n                }\n            </div>\n            {bun && (\n                <li className={ styles.item__bottom } key={ uuidv4() } data-at='constructorBuns'>\n                    <ConstructorElement\n                        isLocked={ true }\n                        type=\"bottom\"\n                        text={ `${ bun.name } ()`}\n                        price={ bun.price }\n                        thumbnail={ bun.image }>\n                    </ConstructorElement>\n                </li>\n            )}\n        </ul>\n    );\n};\n\nexport default ConstructorList;\n","export default __webpack_public_path__ + \"static/media/graphics.6d4020a5.svg\";","import React, { FC } from 'react';\nimport styles from './icon.module.css';\n\ntype TIcon = {\n    icon: string;\n}\n\nconst Icon: FC<TIcon> = ({ icon }) => {\n    return (\n        <img className={ styles.icon } src={ icon } alt=\"\"/>\n    );\n};\n\nexport default Icon;","import React, {FC, useEffect} from 'react';\nimport styles from './orderNumberDetails.module.css';\nimport clsx from \"clsx\";\nimport img from '../../images/graphics.svg';\nimport Icon from \"../Icon/Icon\";\nimport {useDispatch, useSelector} from '../../types';\nimport { constructorActionCreator } from \"../../store/constructor/constructor.actions\";\n\nconst OrderNumberDetails: FC = () => {\n    const dispatch = useDispatch();\n    const { ordersNumberRequest, ordersNumberFailed, ordersNumber } = useSelector(state => state.numberOrder);\n    const { clear } = constructorActionCreator;\n\n    useEffect(() => {\n        return() => {\n            dispatch(clear())\n        }\n    }, [dispatch])// eslint-disable-line react-hooks/exhaustive-deps\n\n    return (\n        <section className={ styles.main }>\n            {\n                ordersNumberRequest ? <p className={ clsx(styles.subtitle, 'text_type_main-medium') }>..</p> :\n                    ordersNumber ? <h1 className={ clsx(styles.header, 'text_type_digits-large ') }>{ ordersNumber?.order.number }</h1> :\n                        ordersNumberFailed ? <p className={ clsx(styles.subtitle, 'text_type_main-medium') }></p> : null\n            }\n            <h2 className={ clsx(styles.subtitle, 'text_type_main-medium') }> </h2>\n            <Icon icon={ img }/>\n            <p className={ clsx(styles.readiness, 'text_type_main-default') }>   </p>\n            <p className={ clsx(styles.text, 'text_type_main-default text_color_inactive') }>    </p>\n        </section>\n    );\n};\n\nexport default OrderNumberDetails;","import React, { useEffect, useState, FC } from 'react';\nimport  styles from './totalConstructor.module.css';\nimport { CurrencyIcon, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useModal } from \"../../hooks/useModal\";\nimport clsx from \"clsx\";\nimport Modal from \"../Modal/Modal\";\nimport OrderNumberDetails from \"../OrderNumberDetails/OrderNumberDetails\";\nimport { getNumberOrders } from \"../../utils/Api\";\nimport { useDispatch, useSelector } from '../../types';\nimport { useHistory } from \"react-router-dom\";\nimport {TData} from \"../../types/types\";\n\n\nconst TotalConstructor: FC = () => {\n    const [ totalPrice, setTotalPrice ] = useState(0);\n\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const { bun, ingredients } = useSelector(state => state.constructorData);\n\n    const allItems = useSelector( state => [state.constructorData.bun, state.constructorData.bun, ...state.constructorData.ingredients]);\n\n    const isAuth = useSelector(state => state.userReducer.isAuth)\n\n    //   \n    const arrIdIngredients = allItems.map((item) => item?._id);\n\n    //   \n    const openOrderModal = () => {\n        if(!isAuth) {\n            history.push('login')\n        }\n        arrIdIngredients &&\n        dispatch(getNumberOrders(arrIdIngredients))\n        openPopup();\n    };\n\n    //   \n    const calculateTotalPrice: (buns: any, arr: TData[]) => void = (buns, arr) => {\n        const priceBuns = Number(buns?.price * 2);\n        const sum = arr?.reduce((acc, item) => {\n            return Number(acc + item?.price)\n        }, 0)\n        if (buns && arr) {\n            setTotalPrice(sum + priceBuns)\n        } else if (buns) {\n            setTotalPrice(priceBuns) }\n        else {\n            setTotalPrice(sum)}\n    }\n\n\n    useEffect(() => {\n        calculateTotalPrice(bun, ingredients);\n    }, [ bun, ingredients])\n\n    const { isOpen, openPopup, closePopup, closePopupEsc } = useModal();\n    return (\n        <section className={ styles.main } onKeyDown={ closePopupEsc }>\n            <div className={ styles.wrapper }>\n               <p className={ clsx(styles.sum, 'text_type_digits-medium') }>{ totalPrice }</p>\n                <div className={ styles.icon} >\n                    <CurrencyIcon type=\"primary\" />\n                </div>\n            </div>\n                <div className={ styles.button }>\n                    <Button onClick={ openOrderModal } disabled={ !bun }> </Button>\n                </div>\n            {isOpen &&\n                < Modal isOpen={ isOpen } closePopup={ closePopup }>\n                    <OrderNumberDetails />\n                </Modal>}\n        </section>\n    );\n};\n\nexport default TotalConstructor;","import React, { FC } from 'react';\nimport styles from './burgerConstructor.module.css';\nimport ConstructorList from \"../ConstructorList/ConstructorList\";\nimport TotalConstructor from \"../TotalConstructor/TotalConstructor\";\n\nconst BurgerConstructor: FC = () => {\n    return (\n        <section className={ styles.main }>\n            <ConstructorList />\n            <TotalConstructor/>\n        </section>\n    );\n};\n\n\nexport default BurgerConstructor;","import React, { FC } from 'react';\nimport styles from './mainPage.module.css';\nimport BurgerIngredients from \"../../components/BurgerIngredients/BurgerIngredients\";\nimport BurgerConstructor from \"../../components/BurgerConstructor/BurgerConstructor\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\n\nconst MainPage: FC = () => {\n    return (\n        <section className={styles.main}>\n            <DndProvider backend={ HTML5Backend } >\n                <BurgerIngredients />\n                <BurgerConstructor />\n            </DndProvider>\n        </section>\n    );\n};\n\nexport default MainPage;","import React, { FC } from 'react';\nimport styles from './form.module.css';\nimport clsx from \"clsx\";\nimport { Button } from '@ya.praktikum/react-developer-burger-ui-components'\n\ntype TForm = {\n    text: string;\n    textButton: string | number;\n    onSubmit: (item: any) => void;\n}\n\nconst Form: FC<TForm> = ({ text, children, textButton, onSubmit }) => {\n    return (\n        <form className={ styles.main } onSubmit={ onSubmit }>\n            <h1 className={ clsx(styles.header, 'text_type_main-medium')}>{ text }</h1>\n            { children }\n            <div className={ clsx(styles.button, 'mb-20') }>\n                <Button type='primary' size='large' htmlType='submit'>{ textButton }</Button>\n            </div>\n        </form>\n    );\n};\n\nexport default Form;","import React, { FC } from 'react';\nimport styles from './formLink.module.css';\nimport { Link } from 'react-router-dom';\nimport clsx from \"clsx\";\n\ntype TFormLink = {\n    text: string;\n    url: string;\n    textLink: string;\n}\n\nconst FormLink: FC<TFormLink> = ({ text, url, textLink}) => {\n    return (\n        <section className={ clsx(styles.main, 'mb-4')}>\n            <p className={'text text_type_main-default text_color_inactive mr-2'}>{ text }</p>\n            <Link className={ clsx(styles.link, 'text text_type_main-default')  } to={ url }>{ textLink }</Link>\n        </section>\n    );\n};\n\nexport default FormLink;","import React, { ChangeEvent, FC, SyntheticEvent } from 'react';\nimport Form from \"../../components/UI/Form/Form\";\nimport { Input } from '@ya.praktikum/react-developer-burger-ui-components';\nimport './index.css';\nimport FormLink from \"../../components/UI/FormLink/FormLink\";\nimport { useDispatch, useSelector } from '../../types';\nimport { login } from \"../../utils/Api\";\nimport { userActionCreator } from \"../../store/user/user.actions\";\n\nconst LoginPage: FC = () => {\n    const dispatch = useDispatch();\n\n    const data = useSelector(state => state.userReducer);\n    const { email, password } = data.user;\n    const { setEdit } = userActionCreator;\n\n\n    const onChange: (e: ChangeEvent<HTMLInputElement>) => void  = e => {\n        dispatch(setEdit({...data.user, [e.target.name]: e.target.value}))\n    }\n\n    const handleSubmit: (e: SyntheticEvent) => void  = (e) => {\n        e.preventDefault();\n        dispatch(login(data.user));\n    }\n\n    return (\n        <>\n            <Form text='' textButton='' onSubmit={ handleSubmit }>\n                <div className={'mt-6'}>\n                    <Input value={ email || '' } onChange={ onChange } type='email' placeholder='E-mail' name='email'/>\n                </div>\n                <div className={'mt-6 mb-6'}>\n                    <Input value={ password || '' } onChange={ onChange } type='password' placeholder='' name='password' icon={'ShowIcon'}/>\n                </div>\n            </Form>\n            <FormLink text='   ?' url='/register' textLink=''/>\n            <FormLink text=' ?' url='/forgot-password' textLink=' '/>\n        </>\n    );\n};\n\nexport default LoginPage;","import React, { ChangeEvent, FC, SyntheticEvent } from 'react';\nimport Form from \"../../components/UI/Form/Form\";\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport FormLink from \"../../components/UI/FormLink/FormLink\";\nimport { register } from \"../../utils/Api\";\nimport { useDispatch, useSelector } from '../../types';\nimport { userActionCreator } from \"../../store/user/user.actions\";\n\nconst RegisterPage: FC = () => {\n    const dispatch = useDispatch();\n\n    const user = useSelector(state => state.userReducer.user);\n    const { setEdit, userUpdateSuccess, loginSuccess } = userActionCreator;\n\n    const onChange: (e: ChangeEvent<HTMLInputElement>) => void = (e) => {\n        dispatch(setEdit({...user, [e.target.name]: e.target.value}))\n    }\n\n    const handleSubmit: (e: SyntheticEvent) => void  = (e) => {\n        e.preventDefault();\n        dispatch(register(user));\n        dispatch(userUpdateSuccess(user))\n        setTimeout(() => {\n            dispatch(loginSuccess(user))\n        },3000)\n    }\n\n    return (\n        <>\n            <Form text='' textButton='' onSubmit={ handleSubmit }>\n                <div className={'mt-6'}>\n                    <Input value={ user.name || '' } onChange={ onChange } type='text' placeholder='' name='name'/>\n                </div>\n                <div className={'mt-6'}>\n                    <Input value={ user.email || '' } onChange={ onChange } type='email' placeholder='E-mail' name='email'/>\n                </div>\n                <div className={'mt-6 mb-6'}>\n                    <Input value={ user.password || '' } onChange={ onChange } type='password' placeholder='' name='password' icon={ 'ShowIcon' }/>\n                </div>\n            </Form>\n            <FormLink text=' ?' url='/login' textLink=''/>\n        </>\n    );\n};\n\nexport default RegisterPage;","import React, {useState, useEffect, FC, SyntheticEvent, ChangeEvent} from 'react';\nimport Form from \"../../components/UI/Form/Form\";\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport FormLink from \"../../components/UI/FormLink/FormLink\";\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { forgotPassword } from \"../../utils/Api\";\nimport { useSelector } from '../../types';\n\nconst ForgotPasswordPage: FC = () => {\n    const history = useHistory();\n    const location = useLocation();\n\n    const [ value, setValue ] = useState({ email: '' });\n\n    const onChange: (e: ChangeEvent<HTMLInputElement>) => void = e => {\n        setValue({ ...value, [e.target.name]: e.target.value });\n    }\n\n    const data = useSelector(state => state.userReducer);\n    const { isAuth } = data\n\n    const handleSubmit: (e: SyntheticEvent) => void = (e) => {\n        e.preventDefault();\n        forgotPassword(value.email)\n            .then(res => {\n                console.log(res)\n                res && history.push({ pathname: '/reset-password', state: location});\n            })\n            .catch(err => console.log(err))\n\n    }\n\n    useEffect(() => {\n        isAuth && history.push('/')\n    }, [isAuth, history])\n\n    return (\n        <>\n            <Form text=' ' textButton='' onSubmit={ handleSubmit }>\n                <div className={'mt-6 mb-6'}>\n                    <Input value={ value.email } onChange={ onChange } type='email' placeholder=' e-mail' name='email'/>\n                </div>\n            </Form>\n            <FormLink text=' ?' url='/login' textLink=''/>\n        </>\n    );\n};\n\nexport default ForgotPasswordPage;","import React, { useState, useEffect, FC, SyntheticEvent, ChangeEvent } from 'react';\nimport Form from \"../../components/UI/Form/Form\";\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport FormLink from \"../../components/UI/FormLink/FormLink\";\nimport { resetPassword } from \"../../utils/Api\";\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { Location } from 'history';\n\nconst ResetPassword: FC = () => {\n    const history = useHistory();\n    const location = useLocation<Location>()\n    const isForgotPassword = location.state?.pathname === '/forgot-password';\n\n    const [ value, setValue ] = useState<{ password: string, token: string}>({ password: '', token: '' });\n    const { password, token } = value;\n\n    const onChange: (e: ChangeEvent<HTMLInputElement>) => void = (e) => {\n        setValue({ ...value, [e.target.name]: e.target.value });\n    }\n\n    const handleSubmit: (e: SyntheticEvent) => void = (e) => {\n        e.preventDefault();\n        resetPassword(password, token)\n            .then(res => {\n                console.log(res)\n                res && history.push('/');\n            })\n            .catch(err => console.log(err))\n\n    }\n\n    useEffect(() => {\n        !isForgotPassword && history.push('/forgot-password')\n    }, [isForgotPassword, history])\n\n    return (\n        <>\n            <Form text=' ' textButton='' onSubmit={ handleSubmit }>\n                <div className={'mt-6'}>\n                    <Input value={ password } onChange={ onChange } type='password' placeholder='  ' name='password' icon={ 'ShowIcon' }/>\n                </div>\n                <div className={'mt-6 mb-6'}>\n                    <Input value={ token } onChange={ onChange } type='text' placeholder='   ' name='token'/>\n                </div>\n            </Form>\n            <FormLink text=' ?' url='/login' textLink=''/>\n        </>\n    );\n};\n\nexport default ResetPassword;","import React, { FC, FormEvent, ChangeEvent, SyntheticEvent } from 'react';\nimport styles from './formProfile.module.css';\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { useDispatch, useSelector } from '../../../types';\nimport { getUser, userUpdate } from \"../../../utils/Api\";\nimport { Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { userActionCreator } from \"../../../store/user/user.actions\";\nimport clsx from \"clsx\";\n\nconst FormProfile: FC = () => {\n    const dispatch = useDispatch();\n\n    const user = useSelector(state => state.userReducer.user);//     \n    const { setEdit } = userActionCreator;\n\n    const onChange: (e: ChangeEvent<HTMLInputElement>) => void = e => {\n        dispatch(setEdit({...user, [e.target.name]: e.target.value}))\n    }\n\n    const handleSubmit: (e: FormEvent) => void = (e) => {\n        e.preventDefault();\n        dispatch(userUpdate(user));//      \n    }\n\n    const handleCloseEdit: (e: SyntheticEvent) => void = (e) => {\n        e.preventDefault();\n        dispatch(getUser());\n    }\n\n    return (\n        <form className={ styles.form } >\n            <div>\n                <Input value={ user.name || '' } onChange={ onChange } type='text' placeholder='' name='name' icon={ 'EditIcon' }/>\n            </div>\n            <div className={'mt-6'}>\n                <Input value={ user.email || '' } onChange={ onChange } type='email' placeholder='' name='email' icon={ 'EditIcon' }/>\n            </div>\n            <div className={'mt-6'}>\n                <Input value={ user.password || '' } onChange={ onChange } type='password' placeholder='' name='password' icon={ 'EditIcon' }/>\n            </div>\n            <div className={ clsx(styles.button, 'mt-6') }>\n                <Button type='secondary' size='large' onClick={ handleCloseEdit }></Button>\n                <Button type='primary' size='large' onClick={ handleSubmit }></Button>\n            </div>\n        </form>\n    );\n};\n\nexport default FormProfile;","import React, { FC } from 'react';\nimport styles from \"./profileNav.module.css\";\nimport { NavLink } from \"react-router-dom\";\nimport clsx from \"clsx\";\nimport { useDispatch } from '../../types';\nimport { constructorActionCreator } from \"../../store/constructor/constructor.actions\";\nimport { userActionCreator } from \"../../store/user/user.actions\";\nimport { logOut } from \"../../utils/Api\";\n\nconst ProfileNav: FC= () => {\n    const dispatch = useDispatch();\n\n    const { clear } = constructorActionCreator;\n    const { out } = userActionCreator;\n\n    const handleLogOut = () => {\n        dispatch(clear())\n        dispatch(out());\n        logOut();\n    }\n\n    return (\n        <div className={ styles.main }>\n            <NavLink exact to='/profile' className={ clsx(styles.link,'text_type_main-medium text_color_inactive mb-5') } activeClassName={ styles.link_active }></NavLink>\n            <NavLink exact to='/profile/orders' className={ clsx(styles.link,'text_type_main-medium text_color_inactive mb-5') } activeClassName={ styles.link_active }> </NavLink>\n            <NavLink exact to='/login' className={ clsx(styles.link,'text_type_main-medium text_color_inactive') } activeClassName={ styles.link_active } onClick={ handleLogOut }></NavLink>\n        </div>\n    );\n};\n\nexport default ProfileNav;","import React, { FC } from 'react';\nimport styles from './profile.module.css';\nimport FormProfile from \"../../components/UI/FormProfile/FormProfile\";\nimport ProfileNav from \"../../components/ProfileNav/ProfileNav\";\n\nconst Profile: FC = () => {\n    return (\n        <div className={ styles.main }>\n            <ProfileNav />\n            <FormProfile/>\n        </div>\n    );\n};\n\nexport default Profile;","import React, { FC } from 'react';\nimport styles from './totalFeedOrders.module.css';\nimport clsx from \"clsx\";\nimport { useSelector } from \"../../types\";\n\nconst TotalFeedOrders: FC = () => {\n    const { messages, total, totalToday} = useSelector(state => state.socket);\n\n    const doneOrders = messages && messages.filter((item) => item.status === \"done\");\n\n    const pendingOrders = messages && messages.filter((item) => item.status === \"pending\");\n\n    return (\n        <section className={ styles.main }>\n            <div className={ styles.status }>\n                <div className={ styles.wrapper}>\n                    <h2 className={ clsx(styles.subtitle, 'text_type_main-medium') }>:</h2>\n                    <div className={ styles.list }>\n                        {doneOrders &&\n                            doneOrders.map(item => {\n                                return <p className={ clsx(styles.text, styles.text__green, 'text_type_digits-default')} key={ item._id }>{ item.number }</p>\n                            })\n                        }\n                    </div>\n                </div>\n                { pendingOrders &&  pendingOrders.length !== 0  &&\n                    <div className={ styles.wrapper }>\n                        <h2 className={ clsx(styles.subtitle, 'text_type_main-medium') }> :</h2>\n                        <div className={ styles.list }>\n                            {pendingOrders && pendingOrders.length !== 0 &&\n                                pendingOrders.map(item => {\n                                    return <p className={ clsx(styles.text, 'text_type_digits-default')} key={ item._id }>{ item.number }</p>\n                                })\n                            }\n                        </div>\n                    </div>\n                }\n            </div>\n            <div className={ styles.all }>\n                <h2 className={ clsx(styles.subtitle, styles.subtitle__all, 'text_type_main-medium') }>   :</h2>\n                { total && <p className={ clsx(styles.text__large, 'text_type_digits-large') }>{ total }</p> }\n            </div>\n            <div className={ styles.completedToday }>\n                <h2 className={ clsx(styles.subtitle, styles.subtitle__all, 'text_type_main-medium') }>  :</h2>\n                { totalToday && <p className={ clsx(styles.text__large, 'text_type_digits-large') }>{ totalToday }</p>}\n            </div>\n        </section>\n    );\n};\n\nexport default TotalFeedOrders;","import { formatRelative } from 'date-fns'\nimport { ru } from \"date-fns/locale\";\n\nexport const dateCalc = (date: any) => {\n    return formatRelative(new Date(date), new Date(), {\n        locale: ru\n    })\n}\n\nexport const sumOrders = (arr: any, set: any) => {\n    const sum = arr?.reduce((acc: any, item: any) => {\n        return Number(acc + item?.price)\n    }, 0)\n    if (sum) {\n        set( sum )\n    }\n}\n\nexport const orderStatus = (status: any) => {\n   return  status === \"done\"\n                ? \"\"\n                 : status === \"pending\"\n                 ? \"\"\n                : status === \"created\"\n                ? \"\"\n                : \"\";\n}\n","import React, { FC, useEffect, useState } from 'react';\nimport styles from './ordersItem.module.css';\nimport clsx from 'clsx';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { v4 as uuidv4 } from 'uuid';\nimport { TOrders } from '../../types/types';\nimport { dateCalc } from '../../utils';\nimport { useSelector } from '../../types';\nimport { sumOrders, orderStatus } from '../../utils';\n\ntype TOrdersItem = {\n\tonClick: (item: TOrders) => void;\n\titem: TOrders;\n\tstatus?: boolean;\n};\n\nconst OrdersItem: FC<TOrdersItem> = ({ onClick,  item, status }) => {\n\tconst [ price, setPrice ] = useState(0);\n\n\t//   \n\tconst data = useSelector(state => state.data.ingredientsData);\n\n\t//      \n\tconst identicalIngredients = item.ingredients\n\t\t.filter(item => item !== undefined)\n\t\t.map(id => {\n\t\t\treturn data.find(item => item._id === id);\n\t\t});\n\n\t//5   \n\tconst ingredients = identicalIngredients.slice(0, 5);\n\n\t//      \n\tconst difference =\n\t\tidenticalIngredients.length - ingredients.length !== 0 &&\n\t\tidenticalIngredients.length - ingredients.length;\n\n\t//  \n\tconst lastIngredient = identicalIngredients[identicalIngredients.length - 1];\n\n\tuseEffect(() => sumOrders(identicalIngredients, setPrice),[]);// eslint-disable-line react-hooks/exhaustive-deps\n\n\tconst statusOrder = orderStatus(item.status)\n\n\treturn (\n\t\t<section className={styles.main} onClick={() => onClick(item)}>\n\t\t\t<div className={styles.wrapper}>\n\t\t\t\t<p\n\t\t\t\t\tclassName={clsx(styles.number, 'text_type_digits-default')}\n\t\t\t\t>{`#${item.number}`}</p>\n\t\t\t\t<p className={clsx('text text_type_main-default text_color_inactive')}>\n\t\t\t\t\t{dateCalc(item.createdAt)}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<h2 className={clsx(styles.title, 'text_type_main-medium')}>\n\t\t\t\t{item.name}\n\t\t\t</h2>\n\t\t\t{status && (\n\t\t\t\t<p className={clsx(styles.status, 'text_type_main-default')}>\n\t\t\t\t\t{ statusOrder }\n\t\t\t\t</p>\n\t\t\t)}\n\t\t\t<div className={styles.wrapper}>\n\t\t\t\t<div className={styles.images}>\n\t\t\t\t\t{ingredients.map((el) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className={styles.item} key={uuidv4()}>\n\t\t\t\t\t\t\t\t<img className={styles.img} src={el?.image_large} alt='' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t{ difference && lastIngredient && (\n\t\t\t\t\t\t<div className={ styles.item } key={ uuidv4() }>\n\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\tstyles.difference,\n\t\t\t\t\t\t\t\t\t'text text_type_main-default'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>{`+${difference}`}</p>\n\t\t\t\t\t\t\t<div className={styles.bg}></div>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName={styles.img}\n\t\t\t\t\t\t\t\tsrc={lastIngredient.image_large}\n\t\t\t\t\t\t\t\talt=''\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.price}>\n\t\t\t\t\t<p className={clsx(styles.price__text, 'text_type_digits-default')}>\n\t\t\t\t\t\t{price}\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className={styles.icon}>\n\t\t\t\t\t\t<CurrencyIcon type='primary' />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default OrdersItem;\n","import React, { FC } from 'react';\nimport styles from './ordersList.module.css';\nimport OrdersItem from '../OrdersItem/OrdersItem';\nimport { useSelector } from \"../../types\";\nimport  { Link, useLocation } from \"react-router-dom\";\nimport { TOrders } from \"../../types/types\";\n\ntype TOrdersList = {\n\tonClick: (item: TOrders) => void;\n}\n\nconst OrdersList: FC<TOrdersList> = ({ onClick }) => {\n\tconst location = useLocation();\n\n\tconst orders = useSelector(state => state.socket.messages);\n\n\treturn (\n\t\t<section className={styles.main}>\n\t\t\t{\n\t\t\t\torders?.map(item => {\n\t\t\t\t\treturn <Link className={ styles.link }\n\t\t\t\t\t\t\t\t key={item._id}\n\t\t\t\t\t\t\t\t to={ { pathname: `feed/${item._id}`,\n\t\t\t\t\t\t\t\t\t state: { background: location }} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<OrdersItem onClick={ onClick } key={ item._id } item={ item }/>\n\t\t\t\t\t</Link>\n\t\t\t\t})\n\t\t\t}\n\t\t</section>\n\t);\n};\n\nexport default OrdersList;\n","import { TOrders } from \"../../types/types\";\n\nexport enum RootOrdersDetailsAction {\n    GET_ORDERS_DETAILS = 'GET_ORDERS_DETAILS',\n    DELETE_ORDERS_DETAILS = 'DELETE_ORDERS_DETAILS'\n}\n\ninterface IGetOrdersDetails {\n    type: RootOrdersDetailsAction.GET_ORDERS_DETAILS,\n    payload: TOrders\n}\n\ninterface IDeleteOrdersDetails {\n    type: RootOrdersDetailsAction.DELETE_ORDERS_DETAILS,\n}\n\nexport type TOrdersDetailsAction =\n    | IGetOrdersDetails\n    | IDeleteOrdersDetails\n\nexport const orderDetailsActionCreator = {\n    getOrdersDetails: (payload: TOrders): TOrdersDetailsAction => ({ type: RootOrdersDetailsAction.GET_ORDERS_DETAILS, payload }),\n    deleteOrdersDetails: (): TOrdersDetailsAction => ({ type: RootOrdersDetailsAction.DELETE_ORDERS_DETAILS })\n}","import { AppDispatch } from \"../../types\";\nimport { Middleware, MiddlewareAPI } from \"redux\";\nimport { RootSocketAction, TWSActions } from \"../socket/socket.actions\";\n\n\nexport const socketMiddleware = (wsUrl: string, wsActions: TWSActions): Middleware => {\n    return (store: MiddlewareAPI<AppDispatch, RootSocketAction>) => {\n        let socket: WebSocket | null = null;\n        const { } = wsActions;\n        return (next) => (action) => {\n            const { dispatch } = store;\n            const { type, payload } = action;\n            const { start, success, error, closed, message } = wsActions;\n\n            if (type === start && payload.url.length > 30) {\n                const url = `${ wsUrl }?token=${ payload.url }`;\n                socket = new WebSocket(url);\n            } else if(type === start) {\n                socket = new WebSocket(`${ wsUrl }${ payload.url }`);\n            }\n\n            if (socket) {\n                socket.onopen = (event) => {\n                    dispatch({ type: success, payload: event });\n                };\n\n                socket.onerror = (event) => {\n                    dispatch({ type: error, payload: event });\n                };\n\n                if (socket.url.includes('token')) {\n                    socket.onmessage = (event) => {\n                        const data = JSON.parse(event.data);\n                        dispatch({ type: message, payload: data });\n                    };\n                } else {\n                    socket.onmessage = (event) => {\n                        const data = JSON.parse(event.data);\n                        dispatch({ type: message, payload: data });\n                    };\n                }\n\n                socket.onclose = (event) => {\n                    dispatch({ type: closed, payload: event });\n                };\n            }\n            next(action);\n        }\n    }\n};","import React, { FC } from 'react';\nimport styles from './orderInfo.module.css';\nimport { TData } from \"../../types/types\";\nimport clsx from \"clsx\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\n\ntype TOrderInfo = {\n    item?: TData\n}\n\nconst OrderInfo: FC<TOrderInfo> = ({ item }) => {\nconst count = item?.__v;\nconst countItem = Number(count) === 0 ? Number(count) + 1 : count;\n\n    return (\n        <div className={ styles.main }>\n            <div className={ styles.wrapper }>\n                <div className={ styles.images }>\n                    <div className={ styles.item } >\n                        { item && <img className={ styles.img } src={ item.image_large } alt=\"\"/>}\n                    </div>\n                </div>\n                { item &&  <p className={ clsx(styles.name, 'text_type_main-default') }>{ item.name }</p> }\n            </div>\n            <div className={ styles.total}>\n                {item && <p className={ clsx(styles.price, 'text_type_digits-default') }>{ `${countItem} x ${item.price}` }</p>}\n                <div className={ styles.icon }>\n                    <CurrencyIcon type='primary' />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default OrderInfo;","import React, { FC, useState, useEffect, useMemo } from 'react';\nimport styles from './orderDetails.module.css';\nimport clsx from \"clsx\";\nimport OrderInfo from \"../OrderInfo/OrderInfo\";\nimport {CurrencyIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {TData, TOrders} from \"../../types/types\";\nimport { useSelector } from \"../../types\";\nimport { orderStatus, dateCalc , sumOrders} from \"../../utils\";\nimport { v4 as uuidv4 } from 'uuid';\n\n\ntype TOrderDetails = {\n    details?: TOrders,\n}\n\nconst OrderDetails:FC<TOrderDetails> = ({ details}) => {\n    const [ total, setTotal ] = useState(0);\n    //   \n    const data = useSelector(state => state.data.ingredientsData);\n\n    const orders = useSelector(state => state.oderDetails.orderDetails);\n    const {  name, status, createdAt } = orders;\n\n    //      \n    const identicalIngredients = orders.ingredients\n        .filter(item => item !== undefined)\n        .map(id => {\n            return data.find(item => item._id === id);\n        });\n\n\n    const identicalIngredientsDetails = details?.ingredients\n        .filter(item => item !== undefined)\n        .map(id => {\n            return data.find(item => item._id === id);\n        });\n\n\n    const statusOrder = orderStatus(status);\n    const statusOrderDetails = orderStatus(details?.status);\n\n    useEffect(() => {\n        if (identicalIngredients) {\n            sumOrders(identicalIngredients, setTotal)\n        }\n            sumOrders(identicalIngredientsDetails, setTotal)\n    }, [])// eslint-disable-line react-hooks/exhaustive-deps\n\n    const findI = useMemo(() => {\n        if (orders._id !== '') {\n            const ingredientsArray: TData[] = [];\n            const arr = orders.ingredients?.map((id) =>\n                data.find((ingredient) => ingredient._id === id)\n            );\n            arr.forEach((x) => {\n                const find: boolean = ingredientsArray.some(\n                    (ing) => ing._id === x!._id\n                );\n                if (find) {\n                    const findElement = ingredientsArray.find(\n                        (ing) => ing._id === x!._id\n                    );\n                    if (findElement) {\n                        findElement.__v = findElement.__v + 1;\n                    }\n                    return;\n                } else {\n                    if (x) {\n                        ingredientsArray.push(x);\n                    }\n                }\n            });\n\n            return ingredientsArray;\n        } else {\n            const ingredientsDetailsArray: TData[] = [];\n            const arrDetails = details?.ingredients?.map((id) =>\n                data.find((ingredient) => ingredient._id === id)\n            );\n            arrDetails?.forEach((x) => {\n                const find: boolean = ingredientsDetailsArray.some(\n                    (ing) => ing._id === x!._id\n                );\n                if (find) {\n                    const findElement = ingredientsDetailsArray.find(\n                        (ing) => ing._id === x!._id\n                    );\n                    if (findElement) {\n                        findElement.__v = findElement.__v + 1;\n                    }\n                    return;\n                } else {\n                    if (x) {\n                        ingredientsDetailsArray.push(x);\n                    }\n                }\n            });\n\n            return ingredientsDetailsArray;\n        }\n    }, [orders, details, data]);\n\n    useEffect(() => {\n        return () => {\n            findI.forEach(item => {\n                item.__v = 0\n            })\n        }\n    })\n\n    return (\n        <div className={ styles.content }>\n            <h2 className={ clsx(styles.subtitle, 'text_type_main-medium') }>{ name || details?.name }</h2>\n            <p className={ clsx(styles.status, 'text_type_main-default') }>{ statusOrder  || statusOrderDetails }</p>\n            <h2 className={ clsx(styles.subtitle, styles.structure, 'text_type_main-medium') }>:</h2>\n            {findI &&\n                <div className={ styles.list }>\n                    {findI.map((item) => {\n                        return (\n                            <OrderInfo key={ uuidv4() } item={item} />\n                        );\n                    })}\n                </div>\n            }\n            <div className={ styles.wrapper }>\n                { createdAt && <p className={clsx(styles.date, 'text_type_main-default text_color_inactive')}>{ dateCalc(createdAt) }</p>}\n                { details?.createdAt && <p className={clsx(styles.date, 'text_type_main-default text_color_inactive')}>{ dateCalc(details.createdAt) }</p> }\n                <div className={ styles.total }>\n                    { total && <p className={clsx(styles.price, 'text_type_digits-default')}>{ total }</p> }\n                    <div className={ styles.icon }>\n                        <CurrencyIcon type='primary' />\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default OrderDetails;","import React, { FC, useEffect } from 'react';\nimport styles from './ordersFeedPage.module.css';\nimport clsx from \"clsx\";\nimport TotalFeedOrders from \"../../components/TotalFeedOrders/TotalFeedOrders\";\nimport OrdersList from \"../../components/OrdersList/OrdersList\";\nimport { socketActionCreators } from \"../../store/socket/socket.actions\";\nimport { useDispatch, useSelector } from \"../../types\";\nimport {TOrders} from \"../../types/types\";\nimport { orderDetailsActionCreator } from \"../../store/ordersDetails/ordersDetails.actions\";\nimport { useModal } from \"../../hooks/useModal\";\nimport Modal from \"../../components/Modal/Modal\";\nimport { useHistory } from \"react-router-dom\";\nimport OrderDetails from \"../../components/OrderDetails/OrderDetails\";\n\nconst OrdersFeedPage: FC = () => {\n    const history = useHistory();\n    const { isOpen, openPopup, closePopup } = useModal();\n    const dispatch = useDispatch();\n    const { number } = useSelector(state => state.oderDetails.orderDetails);\n    const { getOrdersDetails, deleteOrdersDetails } = orderDetailsActionCreator;\n\n    useEffect(() => {\n        dispatch(socketActionCreators.start('/all'))\n        return () => {\n            dispatch(socketActionCreators.close())\n        }\n    }, [dispatch])\n\n    const clickIngredients: (item: TOrders) => void  = (item) => {\n        dispatch(getOrdersDetails(item));\n        openPopup();\n    };\n\n    const closeModalDetails = () => {\n        dispatch(deleteOrdersDetails());\n        closePopup();\n        history.push('/feed')\n    };\n\n    return (\n        <section className={ styles.main }>\n            <h1 className={ clsx(styles.header, 'text text_type_main-large') }> </h1>\n            <div className={ styles.content }>\n                <OrdersList onClick={ clickIngredients }/>\n                <TotalFeedOrders />\n            </div>\n            {isOpen &&\n                <Modal\n                    isOrders={ true }\n                    isOpen={ isOpen }\n                    closePopup={ closeModalDetails }\n                    header={ number }>\n                    <OrderDetails />\n                </Modal>}\n        </section>\n    );\n};\n\nexport default OrdersFeedPage;","import React, { FC } from 'react';\nimport styles from './notFoundPage.module.css';\n\nconst NotFoundPage: FC = () => {\n    return (\n        <div className={ styles.main }>\n            <p className='text text_type_main-large'>404</p>\n            <p className='text text_type_main-medium'>\n                   .\n            </p>\n        </div>\n    );\n};\n\nexport default NotFoundPage;","import React, { FC } from 'react';\nimport styles from './ingredientPage.module.css';\nimport { useSelector } from '../../types';\nimport { useHistory } from \"react-router-dom\";\nimport IngredientDetails from \"../../components/IngredientDetails/IngredientDetails\";\n\nconst IngredientPage: FC = () => {\n    const items = useSelector(state => state.data.ingredientsData);\n\n    const history = useHistory();\n    const id = history.location.pathname.replace(\"/ingredients/\", \"\");\n\n    return (\n        <section className={ styles.main }>\n            {items && (\n                <IngredientDetails\n                    details={ items.filter(el => el._id === id)[0] }\n                />\n            )}\n        </section>\n    );\n};\n\nexport default IngredientPage;","import React, { FC, useEffect}  from 'react';\nimport styles from './orderDetailsPage.module.css';\nimport clsx from 'clsx';\nimport { useDispatch, useSelector } from '../../types';\nimport OrderDetails from \"../../components/OrderDetails/OrderDetails\";\nimport { useHistory } from \"react-router-dom\";\nimport { socketActionCreators } from \"../../store/socket/socket.actions\";\nimport { url } from '../../utils/constants';\n\nconst OrderDetailsPage: FC = () => {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\t url && history.location.pathname.includes('profile') ?\n\t\t\tdispatch(socketActionCreators.start(url)) :\n\t\t\tdispatch(socketActionCreators.start('/all'))\n\t\treturn () => {\n\t\t\tdispatch(socketActionCreators.close())\n\t\t}\n\t}, [dispatch])\n\n\tconst orders = useSelector(state => state.socket.messages);\n\n\tconst id = history.location.pathname.includes('profile') ?\n\t\thistory.location.pathname.replace(\"/profile/orders/\", \"\")\n\t\t:\n\t\thistory.location.pathname.replace(\"/feed/\", \"\")\n\n\tconst itemFilter = orders?.filter(el => el._id === id)[0];\n\n\n\treturn (\n\t\t<section className={styles.main}>\n\t\t\t<div className={styles.header}>\n\t\t\t\t<h1 className={clsx(styles.title, 'text_type_digits-default')}>{`#${ itemFilter?.number }`}</h1>\n\t\t\t</div>\n\t\t\t{orders ? <OrderDetails details={ itemFilter }/> : ' '}\n\n\t\t</section>\n\t);\n};\n\nexport default OrderDetailsPage;\n","import React, { FC, useEffect } from 'react';\nimport styles from './ordersHistoryPage.module.css';\nimport OrdersItem from \"../../components/OrdersItem/OrdersItem\";\nimport Modal from \"../../components/Modal/Modal\";\nimport { useModal } from \"../../hooks/useModal\";\nimport { socketActionCreators } from \"../../store/socket/socket.actions\";\nimport { useDispatch, useSelector } from \"../../types\";\nimport { getCookie } from \"../../utils/cookie\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport {TOrders} from \"../../types/types\";\nimport { orderDetailsActionCreator } from \"../../store/ordersDetails/ordersDetails.actions\";\nimport OrderDetails from \"../../components/OrderDetails/OrderDetails\";\nimport clsx from \"clsx\";\nimport ProfileNav from \"../../components/ProfileNav/ProfileNav\";\n\nconst OrdersHistoryPage: FC = () => {\n    const { isOpen, closePopup, openPopup} = useModal();\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const location = useLocation();\n\n    const url = getCookie(\"accessToken\")?.split(\"Bearer \").join(\"\");\n\n    useEffect(() => {\n        url && dispatch(socketActionCreators.start(url));\n        return () => {\n            dispatch(socketActionCreators.close())\n        }\n    }, [dispatch])// eslint-disable-line react-hooks/exhaustive-deps\n\n    const { getOrdersDetails, deleteOrdersDetails } = orderDetailsActionCreator;\n    const orders = useSelector(state => state.socket.messages);\n    const { number } = useSelector(state => state.oderDetails.orderDetails);\n    const ingredient = useSelector(state => state.oderDetails.orderDetails);\n\n\n    const clickIngredients: (item: TOrders) => void  = (item) => {\n        dispatch(getOrdersDetails(item));\n        openPopup();\n    };\n\n\n    const closeModalDetails = () => {\n        dispatch(deleteOrdersDetails());\n        closePopup();\n        history.push('/profile/orders')\n    };\n\n    return (\n            <div className={ styles.container}>\n                <ProfileNav />\n                {\n                    orders && orders.length > 0 ?\n                        <section className={ styles.main }>\n                            {\n                                orders?.reverse().map(item => {\n                                    return <Link className={ styles.link }\n                                                 key={item._id}\n                                                 to={ { pathname: `orders/${item._id}`,\n                                                     state: { background: location }} }\n                                    >\n                                        <OrdersItem onClick={ clickIngredients } key={ item._id } item={ item } status={ true }/>\n                                    </Link>\n                                })\n                            }\n                            {isOpen &&\n                                <Modal\n                                    isOpen={ isOpen }\n                                    closePopup={ closeModalDetails }\n                                    header={ number }\n                                    isOrders={ true }>\n                                    <OrderDetails details={ ingredient } />\n                                </Modal>}\n                        </section> : <p className={ clsx(styles.text, 'text_type_main-medium') }>,  </p>\n                }\n            </div>\n    );\n};\n\nexport default OrdersHistoryPage;","import React, { FC, useEffect } from 'react';\nimport { Switch, Route, useLocation, useHistory } from 'react-router-dom';\nimport styles from './app.module.css';\nimport AppHeader from \"../AppHeader/AppHeader\";\nimport { ProtectedRoute } from \"../Protected-route/protected-route\";\nimport {\n    MainPage,\n    LoginPage,\n    RegisterPage,\n    ForgotPasswordPage,\n    ResetPassword,\n    Profile,\n    OrdersFeedPage,\n    NotFoundPage,\n    IngredientPage,\n    OrdersHistoryPage,\n    OrderDetailsPage\n} from '../../pages/pages';\nimport { getData, getUser } from \"../../utils/Api\";\nimport { useDispatch, useSelector } from '../../types';\nimport clsx from \"clsx\";\nimport { Location } from 'history';\n\nconst App: FC = () => {\n    const dispatch = useDispatch();\n\n    const { ingredientsData, dataRequest, dataFailed } = useSelector(state => state.data);\n\n    const { isUser } = useSelector(state => state.userReducer);\n\n    const location = useLocation<{ background : Location }>();\n    const history = useHistory();\n    const action = history.action === \"PUSH\" || history.action === \"REPLACE\";\n    const background = action && location.state && location.state.background;\n\n    useEffect(() => {\n        dispatch(getData());\n        if(isUser) {\n            dispatch(getUser())\n        }\n    }, [dispatch, isUser]);\n\n    const onlyUnAuth = true;\n\n    return (\n            <section className={ styles.main }>\n                    <AppHeader />\n                    <Switch location={ background || location }>\n                        <Route path='/' exact>\n                            {\n                                dataRequest ? <p className={ clsx('text_type_main-medium') }>..</p> :\n                                    ingredientsData ? <MainPage /> :\n                                        dataFailed ? <p className={ clsx('text_type_main-medium') }></p> : null\n                            }\n                        </Route>\n                        <ProtectedRoute path='/login' exact  onlyUnAuth={ onlyUnAuth }>\n                            <LoginPage />\n                        </ProtectedRoute>\n                        <ProtectedRoute path='/register' exact  onlyUnAuth={ onlyUnAuth }>\n                            <RegisterPage />\n                        </ProtectedRoute>\n                        <ProtectedRoute path='/forgot-password' exact  onlyUnAuth={ onlyUnAuth }>\n                            <ForgotPasswordPage />\n                        </ProtectedRoute>\n                        <ProtectedRoute path='/reset-password' exact  onlyUnAuth={ onlyUnAuth }>\n                            <ResetPassword />\n                        </ProtectedRoute>\n                        <ProtectedRoute path='/profile' exact>\n                            <Profile />\n                        </ProtectedRoute>\n                        <ProtectedRoute path='/profile/orders' exact>\n                            <OrdersHistoryPage />\n                        </ProtectedRoute>\n                        <ProtectedRoute path='profile/orders/:id' exact>\n                            <OrderDetailsPage/>\n                        </ProtectedRoute>\n                        <Route path='/feed' exact>\n                            <OrdersFeedPage />\n                        </Route>\n                        <Route path='/ingredients/:id' exact>\n                            <IngredientPage />\n                        </Route>\n                        <Route path='/feed/:id' exact>\n                            <OrderDetailsPage/>\n                        </Route>\n                        <ProtectedRoute path='/profile/orders/:id'>\n                            <OrderDetailsPage/>\n                        </ProtectedRoute>\n                        <Route>\n                            <NotFoundPage />\n                        </Route>\n                    </Switch>\n            </section>\n    );\n};\n\nexport default App;","import { RootConstructorAction, TConstructorAction } from \"./constructor.actions\";\nimport { TData } from \"../../types/types\";\n\ntype TConstructorInitialState = {\n    bun: null | TData,\n    ingredients: Array<TData & { key?: number}>,\n}\n\nexport const initialState: TConstructorInitialState = {\n    bun: null,\n    ingredients: [],\n}\n\nexport const constructorReducer = (state: TConstructorInitialState = initialState, action: TConstructorAction): TConstructorInitialState => {\n    switch (action.type) {\n        case RootConstructorAction.ADD_BUNS: {\n            return {...state, bun: action.payload}\n        }\n        case RootConstructorAction.ADD_INGREDIENTS: {\n            return {...state, ingredients: [...state.ingredients, action.payload]}\n        }\n        case RootConstructorAction.DELETE_INGREDIENT: {\n            return {...state, ingredients:  state.ingredients.filter(item => item.key !== action.payload)}\n        }\n        case RootConstructorAction.MOVE_INGREDIENT: {\n            return {...state, ingredients: action.payload}\n        }\n        case RootConstructorAction.ClEAR_INGREDIENT: {\n            return {...state, ingredients: [], bun: null}\n        }\n        default: return state\n    }\n}\n","import { RootDataAction, TDataAction } from \"./data.actions\";\nimport { TData } from \"../../types/types\";\n\ntype TDataInitialState = {\n    ingredientsData: Array<TData>,\n    dataRequest: boolean,\n    dataFailed: boolean\n}\n\nexport const initialState: TDataInitialState = {\n    ingredientsData: [],\n    dataRequest: false,\n    dataFailed: false\n}\n\nexport const dataReducer = (state: TDataInitialState = initialState, action: TDataAction): TDataInitialState => {\n    switch (action.type) {\n        case RootDataAction.GET_DATA_REQUEST: {\n            return {...state, dataRequest: true, dataFailed: false}\n        }\n        case RootDataAction.GET_DATA_SUCCESS: {\n            return {...state, dataRequest: false, ingredientsData: action.payload, dataFailed: false}\n        }\n        case RootDataAction.GET_DATA_FAILED: {\n            return {...state, dataRequest: false, ingredientsData: [], dataFailed: true}\n        }\n        default: return state\n    }\n}\n","import { RootDetailsAction, TDetailsAction } from \"./details.actions\";\nimport { TIngredientDetails } from \"../../types/types\";\n\ntype TDetailsInitialState = {\n    ingredientsDetails: TIngredientDetails\n}\n\nexport const initialState: TDetailsInitialState = {\n    ingredientsDetails: {\n        calories: 0,\n        carbohydrates: 0,\n        fat: 0,\n        image: '',\n        name: '',\n        proteins: 0\n    },\n}\n\nexport const detailsReducer = (state: TDetailsInitialState = initialState, action: TDetailsAction): TDetailsInitialState => {\n    switch (action.type) {\n        case RootDetailsAction.GET_DETAILS: {\n            return {...state, ingredientsDetails: action.payload}\n        }\n        case RootDetailsAction.DELETE_DETAILS: {\n            return {...state, ingredientsDetails: {\n                    calories: 0,\n                    carbohydrates: 0,\n                    fat: 0,\n                    image: '',\n                    name: '',\n                    proteins: 0}}\n        }\n        default: return state\n    }\n}\n","import { RootUserActions, TUserAction } from \"./user.actions\";\nimport { TUser } from \"../../types/types\";\n\ntype TUserInitialState = {\n    user: TUser,\n\n    token: string,\n\n    isUser: boolean,\n    isAuth: boolean,\n\n    loginRequest: boolean,\n    loginFailed: boolean,\n\n    registrationRequest: boolean,\n    registrationFailed: boolean,\n\n    getUserRequest: boolean,\n    getUserFailed: boolean,\n\n    userUpdateRequest: boolean,\n    userUpdateFailed: boolean,\n}\nexport const initialState: TUserInitialState = {\n    user: {\n        name: '',\n        email: '',\n        password: '',\n    },\n\n    token: '',\n\n    isUser: false,\n    isAuth: false,\n\n    loginRequest: false,\n    loginFailed: false,\n\n    registrationRequest: false,\n    registrationFailed: false,\n\n    getUserRequest: false,\n    getUserFailed: false,\n\n    userUpdateRequest: false,\n    userUpdateFailed: false,\n};\n\nexport const userReducer = (state: TUserInitialState = initialState, action: TUserAction): TUserInitialState => {\n    switch (action.type) {\n        //\n        case RootUserActions.GET_REGISTRATION_REQUEST: {\n            return {...state, registrationRequest: true}\n        }\n        case RootUserActions.GET_REGISTRATION_SUCCESS: {\n            return {...state, registrationRequest: false, user: action.payload, isUser: true, isAuth: true, registrationFailed: false}\n        }\n        case RootUserActions.GET_REGISTRATION_FAILED: {\n            return {...state, registrationRequest: false, user: { name: '', password: '', email: '' }, isUser: false, isAuth: false, registrationFailed: true}\n        }\n        //\n        case RootUserActions.GET_LOGIN_REQUEST: {\n            return {...state, loginRequest: true}\n        }\n        case RootUserActions.GET_LOGIN_SUCCESS: {\n            return {...state, loginRequest: false, user: action.payload, isUser: true, isAuth: true}\n        }\n        case RootUserActions.GET_LOGIN_FAILED: {\n            return {...state, loginRequest: false, user: { password: '', email: '', name: '' }, token: '', loginFailed: true}\n        }\n        //\n        case RootUserActions.LOG_OUT: {\n            return {...state, user: { password: '', email: '', name: '' }, isUser: false, isAuth: false, loginFailed: false}\n        }\n        // \n        case RootUserActions.GET_USER_REQUEST: {\n            return {...state, getUserRequest: true}\n        }\n        case RootUserActions.GET_USER_SUCCESS: {\n            return {...state, getUserRequest: false, user: action.payload, isUser: true,  isAuth: true}\n        }\n        case RootUserActions.GET_USER_FAILED: {\n            return {...state, getUserFailed: true}\n        }\n        // \n        case RootUserActions.USER_UPDATE_REQUEST: {\n            return {...state, userUpdateRequest: true}\n        }\n        case RootUserActions.USER_UPDATE_SUCCESS: {\n            return {...state, userUpdateRequest: false,  user: action.payload, isUser: true}\n        }\n        case RootUserActions.USER_UPDATE_FAILED: {\n            return {...state, userUpdateFailed: true}\n        }\n        //  \n        case RootUserActions.SET_EDIT: {\n            return {...state, user: action.payload}\n        }\n        default: return state\n    }\n}","import { RootNumberOrdersActions, TNumberOrdersAction } from \"./numberOrders.actions\";\nimport { TNumberOrder } from \"../../types/types\";\n\ntype TNumberOrderInitialState = {\n    ordersNumberRequest: boolean,\n    ordersNumberFailed: boolean,\n    ordersNumber: TNumberOrder\n}\n\nexport const initialState: TNumberOrderInitialState = {\n    ordersNumberRequest: false,\n    ordersNumberFailed: false,\n    ordersNumber: {\n        order: {\n            number: 0\n        }\n    }\n};\n\nexport const numberOrderReducer = (state: TNumberOrderInitialState = initialState, action: TNumberOrdersAction): TNumberOrderInitialState => {\n    switch (action.type) {\n        case RootNumberOrdersActions.GET_NUMBER_ORDERS_REQUEST: {\n            return {...state, ordersNumberRequest: true, ordersNumberFailed: false}\n        }\n        case RootNumberOrdersActions.GET_NUMBER_ORDERS_SUCCESS: {\n            return {...state, ordersNumberRequest: false, ordersNumber: action.payload, ordersNumberFailed: false}\n        }\n        case RootNumberOrdersActions.GET_NUMBER_ORDERS_FAILED: {\n            return {...state, ordersNumberRequest: false, ordersNumberFailed: true}\n        }\n        default: return state\n    }\n}\n","import { RootSocketAction, TSocketAction } from \"./socket.actions\";\nimport { TOrders } from \"../../types/types\";\n\ntype TSocketInitialState = {\n    connected: boolean;\n    messages: Array<TOrders> | null;\n    total: number | null;\n    totalToday: number | null;\n}\n\nexport const initialState: TSocketInitialState = {\n    connected: false,\n    messages: null,\n    total: null,\n    totalToday: null\n}\n\nexport const socketReducer = (state: TSocketInitialState = initialState, action: TSocketAction): TSocketInitialState => {\n    switch (action.type) {\n        case RootSocketAction.success: {\n            return { ...state, connected: true }\n        }\n        case RootSocketAction.error: {\n            return { ...state, connected: false }\n        }\n        case RootSocketAction.closed: {\n            return { ...state, connected: false }\n        }\n        case RootSocketAction.message: {\n            return {...state, messages: action.payload.orders, total: action.payload.total, totalToday: action.payload.totalToday }\n        }\n\n        default: return state\n    }\n}","import {RootOrdersDetailsAction, TOrdersDetailsAction} from './ordersDetails.actions';\nimport {TOrders} from \"../../types/types\";\n\ntype TOrdersDetailsInitialState = {\n    orderDetails: TOrders\n}\n\nexport const initialState: TOrdersDetailsInitialState = {\n   orderDetails: {\n       ingredients: [],\n       _id: '',\n       status: '',\n       number: 0,\n       name: '',\n       createdAt: '',\n       updatedAt: ''\n   }\n}\n\nexport const ordersDetailsReducer = (state: TOrdersDetailsInitialState = initialState, action: TOrdersDetailsAction): TOrdersDetailsInitialState => {\n    switch (action.type) {\n        case RootOrdersDetailsAction.GET_ORDERS_DETAILS: {\n            return {...state, orderDetails: action.payload }\n        }\n        case RootOrdersDetailsAction.DELETE_ORDERS_DETAILS: {\n            return {...state, orderDetails: {\n                    ingredients: [],\n                    _id: '',\n                    status: '',\n                    number: 0,\n                    name: '',\n                    createdAt: '',\n                    updatedAt: ''\n            }\n            }\n        }\n        default: return state\n    }\n}\n","import { constructorReducer } from '../store/constructor/constructor.reducers';\nimport { dataReducer } from '../store/data/data.reducers';\nimport { detailsReducer } from '../store/details/details.reducers';\nimport { userReducer } from '../store/user/user.reducers';\nimport { numberOrderReducer } from '../store/numberOrders/numberOrders.reducers';\nimport { combineReducers } from \"redux\";\nimport { socketReducer } from \"../store/socket/socket.reducers\";\nimport  { ordersDetailsReducer } from '../store/ordersDetails/orderDetails.reducers';\n\nexport const rootReducer = combineReducers({\n    data: dataReducer,\n    constructorData: constructorReducer,\n    numberOrder: numberOrderReducer,\n    details: detailsReducer,\n    userReducer: userReducer,\n    socket: socketReducer,\n    oderDetails: ordersDetailsReducer\n})\n\n","import { compose, createStore, applyMiddleware } from 'redux';\nimport { rootReducer } from \"../types/reducers\";\nimport { WS_URL } from \"../utils/constants\";\nimport thunk from \"redux-thunk\";\nimport { socketMiddleware } from \"./middleware/socketMiddleware\";\nimport { RootSocketAction } from \"./socket/socket.actions\";\n\ndeclare global {\n    interface Window {\n        __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n    }\n}\n\nconst composeEnhancers =\n    typeof window === \"object\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n        ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n        : compose;\n\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware(WS_URL, RootSocketAction)));\n\nexport const store = createStore(rootReducer, enhancer)","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport './index.css';\nimport App from \"./components/App/App\";\nimport { store } from \"./store/store\";\nimport { Provider } from 'react-redux';\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={ store }>\n            <Router basename=\"/react-burger\">\n                <App />\n            </Router>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"orderDetails_content__1FYwr\",\"subtitle\":\"orderDetails_subtitle__3Xmlr\",\"structure\":\"orderDetails_structure__3JJFv\",\"status\":\"orderDetails_status__X_M0T\",\"list\":\"orderDetails_list__2MTxp\",\"wrapper\":\"orderDetails_wrapper__3kh-B\",\"date\":\"orderDetails_date__3MW18\",\"total\":\"orderDetails_total__sF78q\",\"price\":\"orderDetails_price__7gTbm\",\"icon\":\"orderDetails_icon__3Z2wE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"ingredientsList_main__1XNjx\",\"subtitle\":\"ingredientsList_subtitle__2MBHj\",\"ulList\":\"ingredientsList_ulList__2zU27\",\"link\":\"ingredientsList_link__3x1RQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"modal_main__37EAm\",\"main__orders\":\"modal_main__orders__1JfEU\",\"header\":\"modal_header__16eTs\",\"title\":\"modal_title__zY62y\",\"icon\":\"modal_icon__CssuZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"orderInfo_main__3GBgp\",\"images\":\"orderInfo_images__3SdEC\",\"item\":\"orderInfo_item__3dB9U\",\"img\":\"orderInfo_img__mIN3b\",\"name\":\"orderInfo_name__17bGw\",\"total\":\"orderInfo_total__9UH8U\",\"price\":\"orderInfo_price__2ntJx\",\"wrapper\":\"orderInfo_wrapper__2D9R8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"appHeader_main__Fn5sx\",\"main__wrapper\":\"appHeader_main__wrapper__1W9Ei\",\"wrapper\":\"appHeader_wrapper__3fuRv\",\"nav\":\"appHeader_nav__1vOSc\",\"item\":\"appHeader_item__2DsPN\",\"text\":\"appHeader_text__1pIP3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"constructorList_main__Pf9k0\",\"scroll\":\"constructorList_scroll__x2rDa\",\"item\":\"constructorList_item__PCklj\",\"item__top\":\"constructorList_item__top__1O8I8\",\"item__bottom\":\"constructorList_item__bottom__3wnGc\",\"text\":\"constructorList_text__3cogG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"orderNumberDetails_main__YWZAC\",\"header\":\"orderNumberDetails_header__1eQ9H\",\"subtitle\":\"orderNumberDetails_subtitle__3gvaF\",\"readiness\":\"orderNumberDetails_readiness__3SHmj\",\"text\":\"orderNumberDetails_text__25sEj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profileNav_main__3rRsx\",\"link\":\"profileNav_link__2Et6w\",\"link_active\":\"profileNav_link_active__1rDpl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"ingredientsItem_main__6v7kS\",\"price\":\"ingredientsItem_price__3yEWf\",\"main__price\":\"ingredientsItem_main__price__2zGWx\",\"name\":\"ingredientsItem_name__hneEY\",\"img\":\"ingredientsItem_img__qtwAA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"totalConstructor_main__3IGQf\",\"wrapper\":\"totalConstructor_wrapper__RPoVA\",\"sum\":\"totalConstructor_sum__FNFPz\",\"icon\":\"totalConstructor_icon__2pqTF\",\"button\":\"totalConstructor_button__3aO3B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"ordersHistoryPage_main__2CLy2\",\"link\":\"ordersHistoryPage_link__9wA0n\",\"text\":\"ordersHistoryPage_text__3CI46\",\"container\":\"ordersHistoryPage_container__2hR9Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"burgerIngredients_main__3TxBd\",\"text\":\"burgerIngredients_text__1K6dj\",\"tab\":\"burgerIngredients_tab__3r13x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"form_main__IYXqF\",\"header\":\"form_header__1YnpX\",\"button\":\"form_button__1gjGe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"ordersFeedPage_main__CBUYF\",\"header\":\"ordersFeedPage_header__I15BW\",\"content\":\"ordersFeedPage_content__1bW-9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"orderDetailsPage_main__1lzbS\",\"header\":\"orderDetailsPage_header__169qW\",\"title\":\"orderDetailsPage_title__2BPCd\",\"subtitle\":\"orderDetailsPage_subtitle__xHt7c\",\"status\":\"orderDetailsPage_status__1xHBH\",\"structure\":\"orderDetailsPage_structure__3b7br\",\"list\":\"orderDetailsPage_list__2Ezw9\",\"wrapper\":\"orderDetailsPage_wrapper__1rNhf\",\"date\":\"orderDetailsPage_date__3aTNe\",\"total\":\"orderDetailsPage_total__2aVXp\",\"price\":\"orderDetailsPage_price__XPEqh\",\"icon\":\"orderDetailsPage_icon__2Q7dh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"modalOverlay_main___6SuU\",\"hidden\":\"modalOverlay_hidden__1q50D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"constructorItem_main__17Kcr\",\"wrapper\":\"constructorItem_wrapper__GIV1S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"formLink_main__1UZv7\",\"link\":\"formLink_link__2OOto\"};"],"sourceRoot":""}